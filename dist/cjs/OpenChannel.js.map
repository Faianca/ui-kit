{"version":3,"file":"OpenChannel.js","sources":["../../../src/smart-components/OpenchannelConversation/utils.ts","../../../src/smart-components/OpenchannelConversation/components/MessageInpuetWrapper.tsx","../../../src/smart-components/OpenchannelConversation/components/FrozenNotification.tsx","../../../src/ui/OpenchannelConversationHeader/index.tsx","../../../src/ui/OpenchannelUserMessage/utils.ts","../../../src/utils/openChannelUtils.ts","../../../src/ui/OpenchannelUserMessage/index.tsx","../../../src/ui/OpenChannelAdminMessage/index.tsx","../../../src/ui/OpenchannelOGMessage/utils.ts","../../../src/ui/OpenchannelOGMessage/index.tsx","../../../src/ui/OpenchannelThumbnailMessage/utils.ts","../../../src/ui/OpenchannelThumbnailMessage/index.tsx","../../../src/ui/OpenchannelFileMessage/utils.ts","../../../src/ui/OpenchannelFileMessage/index.tsx","../../../src/smart-components/OpenchannelConversation/components/RemoveMessageModal.tsx","../../../src/smart-components/OpenchannelConversation/components/types.ts","../../../src/smart-components/OpenchannelConversation/components/MessageHOC.tsx","../../../src/smart-components/OpenchannelConversation/components/OpenchannelConversationScroll.tsx","../../../src/smart-components/OpenchannelConversation/dux/actionTypes.ts","../../../src/smart-components/OpenchannelConversation/dux/reducers.ts","../../../src/smart-components/OpenchannelConversation/dux/initialState.ts","../../../src/smart-components/OpenchannelConversation/hooks/useSetChannel.ts","../../../src/smart-components/OpenchannelConversation/hooks/useHandleChannelEvents.ts","../../../src/smart-components/OpenchannelConversation/hooks/useInitialMessagesFetch.ts","../../../src/smart-components/OpenchannelConversation/hooks/useScrollCallback.ts","../../../src/smart-components/OpenchannelConversation/hooks/useCheckScrollBottom.ts","../../../src/smart-components/OpenchannelConversation/hooks/useSendMessageCallback.ts","../../../src/smart-components/OpenchannelConversation/hooks/useFileUploadCallback.ts","../../../src/smart-components/OpenchannelConversation/hooks/useUpdateMessageCallback.ts","../../../src/smart-components/OpenchannelConversation/hooks/useDeleteMessageCallback.ts","../../../src/smart-components/OpenchannelConversation/hooks/useResendMessageCallback.ts","../../../src/smart-components/OpenchannelConversation/index.tsx"],"sourcesContent":["import format from 'date-fns/format';\nimport Sendbird from 'sendbird';\nimport SendbirdUIKit from '../../index';\n\nexport const getMessageCreatedAt = (message: SendbirdUIKit.EveryMessage): string => format(message.createdAt, 'p');\n\nexport const scrollIntoLast = (intialTry = 0): void => {\n  const MAX_TRIES = 10;\n  const currentTry = intialTry;\n  if (currentTry > MAX_TRIES) {\n    return;\n  }\n  try {\n    const scrollDOM = document.querySelector('.sendbird-openchannel-conversation-scroll');\n    // eslint-disable-next-line no-multi-assign\n    scrollDOM.scrollTop = scrollDOM.scrollHeight;\n  } catch (error) {\n    setTimeout(() => {\n      scrollIntoLast(currentTry + 1);\n    }, 500 * currentTry);\n  }\n};\n\n\nexport const isSameGroup = (\n  message: SendbirdUIKit.EveryMessage,\n  comparingMessage: SendbirdUIKit.EveryMessage,\n): boolean => {\n  if (\n    !message\n    || !comparingMessage\n    || message.messageType === 'admin'\n    || comparingMessage.messageType === 'admin'\n    || !message.sender\n    || !comparingMessage.sender\n    || !message.createdAt\n    || !comparingMessage.createdAt\n    || !message.sender.userId\n    || !comparingMessage.sender.userId\n  ) {\n    return false\n  }\n\n  return (\n    message.sendingStatus === comparingMessage.sendingStatus\n    && message.sender.userId === comparingMessage.sender.userId\n    && getMessageCreatedAt(message) === getMessageCreatedAt(comparingMessage)\n  );\n};\n\nexport const compareMessagesForGrouping = (\n  prevMessage: SendbirdUIKit.EveryMessage,\n  currMessage: SendbirdUIKit.EveryMessage,\n  nextMessage: SendbirdUIKit.EveryMessage,\n): [boolean, boolean] => (\n    [\n      isSameGroup(prevMessage, currMessage),\n      isSameGroup(currMessage, nextMessage),\n    ]\n  );\n\nexport const kFormatter = (num: number): string => {\n  if (Math.abs(num) > 999999) {\n    return `${(Math.abs(num) / 1000000).toFixed(1)}M`;\n  }\n\n  if (Math.abs(num) > 999) {\n    return `${(Math.abs(num) / 1000).toFixed(1)}K`;\n  }\n\n  return `${num}`;\n};\n\nexport const isOperator = (openChannel: Sendbird.OpenChannel, userId: string): boolean => {\n  const { operators } = openChannel;\n  if (operators.map(operator => operator.userId).indexOf(userId) < 0) {\n    return false;\n  }\n  return true;\n};\n\nexport const isDisabledBecauseFrozen = (openChannel: Sendbird.OpenChannel, userId: string): boolean => {\n  const { isFrozen } = openChannel;\n  return isFrozen && !isOperator(openChannel, userId);\n};\n\nexport const isDisabledBecauseMuted = (mutedParticipantIds: Array<string>, userId: string): boolean => {\n  return mutedParticipantIds.indexOf(userId) < 0;\n};\n\nexport const fetchWithListQuery = (\n  listQuery: SendbirdUIKit.UserListQuery,\n  logger: SendbirdUIKit.Logger,\n  eachQueryNextCallback: (users: Array<Sendbird.User>) => void,\n): void => {\n  const fetchList = (query) => {\n    const { hasNext } = query;\n    if (hasNext) {\n      query.next((error, users) => {\n        if (!error) {\n          eachQueryNextCallback(users);\n          fetchList(query);\n        } else {\n          logger.warning('OpenChannel | FetchUserList failed', error);\n        }\n      });\n    } else {\n      logger.info('OpenChannel | FetchUserList finished');\n    }\n  };\n  logger.info('OpenChannel | FetchUserList start', listQuery);\n  fetchList(listQuery);\n};\n\nexport const pxToNumber = (px: string | number): number | void => {\n  if (typeof px === 'number') {\n    return px;\n  }\n  if (typeof px === 'string') {\n    const parsed = Number.parseFloat(px);\n    if (!Number.isNaN(parsed)) {\n      return parsed;\n    }\n  }\n  return null;\n};\n","import React, { useContext } from 'react';\nimport Sendbird from 'sendbird';\nimport { RenderOpenChannelMessageInputProps } from '../../../index';\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\nimport MessageInput from '../../../ui/MessageInput';\n\ninterface Props {\n  channel: Sendbird.OpenChannel;\n  user: Sendbird.User;\n  disabled: boolean;\n  onSendMessage(): void;\n  onFileUpload(file_: File): void;\n  renderMessageInput?(renderProps: RenderOpenChannelMessageInputProps): JSX.Element;\n}\n\nconst MessageInputWrapper = ({\n  channel,\n  user,\n  disabled,\n  onSendMessage,\n  onFileUpload,\n  renderMessageInput,\n}: Props, ref: React.RefObject<HTMLInputElement>): JSX.Element => {\n  if (!channel) {\n    return;\n  }\n\n  const { stringSet } = useContext(LocalizationContext);\n\n  if (renderMessageInput) {\n    return renderMessageInput({ channel, user, disabled });\n  }\n\n  return (\n    <div className=\"sendbird-openchannel-footer\">\n      <MessageInput\n        ref={ref}\n        disabled={disabled}\n        onSendMessage={onSendMessage}\n        onFileUpload={onFileUpload}\n        placeholder={(\n          disabled\n          && stringSet.CHANNEL__MESSAGE_INPUT__PLACE_HOLDER__DISABLED\n          // add disabled because of muted state\n        )}\n      />\n    </div>\n  );\n};\n\nexport default React.forwardRef(MessageInputWrapper);\n","import React, { useContext } from 'react';\n\nimport './frozen-notification.scss';\n\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\nimport Label, { LabelTypography } from '../../../ui/Label';\n\nconst FrozenNotification = (): JSX.Element => {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div className=\"sendbird-frozen-channel-notification\">\n      <Label\n        className=\"sendbird-frozen-channel-notification__text\"\n        type={LabelTypography.CAPTION_2}\n      >\n        {stringSet.CHANNEL_FROZEN}\n      </Label>\n    </div>\n  );\n}\n\nexport default FrozenNotification;\n","import React, { useContext } from 'react';\nimport './index.scss';\n\nimport Avatar from '../Avatar';\nimport Icon, { IconColors, IconTypes } from '../Icon';\nimport IconButton from '../IconButton';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\n\ninterface Props {\n  coverImage?: string;\n  title?: string;\n  subTitle?: string;\n  amIOperator?: boolean;\n  onActionClick?(): void;\n}\n\nexport default function OpenchannelConversationHeader({\n  coverImage,\n  title,\n  subTitle,\n  amIOperator,\n  onActionClick,\n}: Props): JSX.Element {\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <div className=\"sendbird-openchannel-conversation-header\">\n      <div className=\"sendbird-openchannel-conversation-header__left\">\n        {\n          coverImage ? (\n            <Avatar\n              className=\"sendbird-openchannel-conversation-header__left__cover-image\"\n              src={coverImage}\n              alt=\"channel cover image\"\n              width=\"32px\"\n              height=\"32px\"\n            />\n          ) : (\n            <div\n              className=\"sendbird-openchannel-conversation-header__left__cover-image--icon\"\n              style={{ width: 32, height: 32 }}\n            >\n              <Icon\n                type={IconTypes.CHANNELS}\n                fillColor={IconColors.CONTENT}\n                width=\"18px\"\n                height=\"18px\"\n              />\n            </div>\n          )\n        }\n        <Label\n          className=\"sendbird-openchannel-conversation-header__left__title\"\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {title || stringSet.NO_TITLE}\n        </Label>\n        <Label\n          className=\"sendbird-openchannel-conversation-header__left__sub-title\"\n          type={LabelTypography.BODY_2}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {subTitle || stringSet.NO_TITLE}\n        </Label>\n      </div>\n      <div className=\"sendbird-openchannel-conversation-header__right\">\n        <IconButton\n          className=\"sendbird-openchannel-conversation-header__right__trigger\"\n          width=\"32px\"\n          height=\"32px\"\n          onClick={onActionClick}\n        >\n          <Icon\n            type={(\n              amIOperator\n              ? IconTypes.INFO\n              : IconTypes.MEMBERS\n            )}\n            fillColor={IconColors.PRIMARY}\n            width=\"24px\"\n            height=\"24px\"\n          />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","export const copyToClipboard = (text: string): boolean => {\n  // @ts-ignore: Unreachable code error\n  if (window.clipboardData && window.clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    // @ts-ignore: Unreachable code error\n    return window.clipboardData.setData('Text', text);\n  }\n  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n    const textarea = document.createElement('textarea');\n    textarea.textContent = text;\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\n\nexport default { copyToClipboard };\n","import Sendbird from 'sendbird';\nimport { ClientUserMessage, ClientFileMessage } from '../index';\n\nconst OpenChannelMessageStatusTypes = {\n  NONE: 'none',\n  PENDING: 'pending',\n  FAILED: 'failed',\n  CANCELED: 'canceled',\n  SUCCEEDED: 'succeeded'\n};\n\nexport const getSenderFromMessage = (message: ClientUserMessage | ClientFileMessage): Sendbird.User => {\n  return message.sender || message._sender;\n};\n\nexport const checkIsSent = (status: string): boolean => (status === OpenChannelMessageStatusTypes.SUCCEEDED);\nexport const checkIsPending = (status: string): boolean => (status === OpenChannelMessageStatusTypes.PENDING);\nexport const checkIsFailed = (status: string): boolean => (status === OpenChannelMessageStatusTypes.FAILED);\n\nexport const checkIsByMe = (message: ClientFileMessage | ClientUserMessage, userId: string): boolean => (getSenderFromMessage(message).userId === userId);\n\ninterface isFineCopyParams {\n  message: ClientUserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineCopy = ({ message }: isFineCopyParams): boolean => {\n  return (message.messageType === 'user' && message.message.length > 0);\n};\n\ninterface isFineResendParams {\n  message: ClientFileMessage | ClientUserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineResend = ({ message, status, userId }: isFineResendParams): boolean => {\n  return checkIsByMe(message, userId)\n    && checkIsFailed(status)\n    && message.isResendable\n    && message.isResendable();\n};\n\ninterface isFineEditParams {\n  message: ClientUserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineEdit = ({ message, status, userId }: isFineEditParams): boolean => {\n  return checkIsByMe(message, userId) && checkIsSent(status);\n};\n\ninterface isFineDeleteParams {\n  message: ClientFileMessage | ClientUserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineDelete = ({ message, userId }: isFineDeleteParams): boolean => {\n  return checkIsByMe(message, userId);\n};\n\ninterface showMenuTriggerParams {\n  message: ClientUserMessage | ClientFileMessage;\n  status: string;\n  userId: string;\n}\nexport const showMenuTrigger = (props: showMenuTriggerParams): boolean => {\n  const { message, status, userId } = props;\n  if (message.messageType === 'user') {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineEdit({ message, status, userId })\n      || isFineCopy({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  } else {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  }\n};\n","import React, {\n  useMemo,\n  useContext,\n  useRef,\n  useState,\n  ReactElement,\n  useEffect,\n} from 'react';\nimport format from 'date-fns/format';\nimport './index.scss';\n\nimport Avatar from '../Avatar';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Loader from '../Loader';\nimport UserProfile from '../UserProfile';\nimport { UserProfileContext } from '../../lib/UserProfileContext';\n\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { copyToClipboard } from './utils';\nimport uuidv4 from '../../utils/uuid';\nimport { ClientUserMessage } from '../../index';\nimport {\n  checkIsByMe,\n  checkIsPending,\n  checkIsFailed,\n  isFineCopy,\n  isFineEdit,\n  isFineResend,\n  isFineDelete,\n  showMenuTrigger,\n} from '../../utils/openChannelUtils';\nimport { getSenderFromMessage } from '../../utils/openChannelUtils';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: ClientUserMessage;\n  userId: string;\n  disabled?: boolean;\n  showEdit(bool: boolean): void;\n  showRemove(bool: boolean): void;\n  resendMessage(message: ClientUserMessage): void;\n  chainTop?: boolean;\n  chainBottom?: boolean;\n  status: string;\n}\n\nexport default function OpenchannelUserMessage({\n  className,\n  message,\n  userId,\n  resendMessage,\n  disabled,\n  showEdit,\n  showRemove,\n  chainTop,\n  status,\n}: Props): ReactElement {\n  if (!message || message.messageType !== 'user') {\n    return null;\n  }\n\n  // hooks\n  const { stringSet } = useContext(LocalizationContext);\n  const { disableUserProfile, renderUserProfile } = useContext(UserProfileContext);\n  const messageRef = useRef(null);\n  const avatarRef = useRef(null);\n  const contextMenuRef = useRef(null);\n  const [contextStyle, setContextStyle] = useState({});\n\n  // consts\n  const isByMe = checkIsByMe(message, userId);\n  const isPending = checkIsPending(status);\n  const isFailed = checkIsFailed(status);\n  const sender = getSenderFromMessage(message);\n\n  const MemoizedMessageText = useMemo(() => () => {\n    const splitMessage = message.message.split(/\\r/);\n    const matchedMessage = splitMessage.map((word) => (word !== '' ? word : <br />));\n    if (message.updatedAt > 0) {\n      matchedMessage.push(\n        <Label\n          key={uuidv4()}\n          type={LabelTypography.BODY_1}\n          color={LabelColors.ONBACKGROUND_2}\n          calssName=\"sendbird-openchannel-user-message-word\"\n        >\n          {` ${stringSet.MESSAGE_EDITED} `}\n        </Label>,\n      );\n    }\n    return matchedMessage;\n  }, [message, message.updatedAt]);\n\n  // place context menu top depending clientHeight of message component\n  useEffect(() => {\n    if (messageRef.current.clientHeight > 36) {\n      setContextStyle({ top: '8px ' });\n    } else {\n      setContextStyle({ top: '2px' });\n    }\n  }, [window.innerWidth]);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-openchannel-user-message',\n      ].join(' ')}\n      ref={messageRef}\n    >\n      <div className=\"sendbird-openchannel-user-message__left\">\n        {\n          !chainTop && (\n            <ContextMenu\n              menuTrigger={(toggleDropdown) => (\n                <Avatar\n                  className=\"sendbird-openchannel-user-message__left__avatar\"\n                  src={sender.profileUrl || ''}\n                  ref={avatarRef}\n                  width=\"28px\"\n                  height=\"28px\"\n                  onClick={() => {\n                    if (!disableUserProfile) {\n                      toggleDropdown();\n                    }\n                  }}\n                />\n              )}\n              menuItems={(closeDropdown) => (\n                <MenuItems\n                  parentRef={avatarRef}\n                  parentContainRef={avatarRef}\n                  closeDropdown={closeDropdown}\n                  style={{ paddingTop: 0, paddingBottom: 0 }}\n                >\n                  {\n                    renderUserProfile\n                    ? (\n                      renderUserProfile({\n                        user: sender,\n                        close: closeDropdown,\n                      })\n                    )\n                    : (\n                      <UserProfile\n                        user={sender}\n                        onSuccess={closeDropdown}\n                        disableMessaging\n                      />\n                    )\n                  }\n                </MenuItems>\n              )}\n            />\n          )\n        }\n      </div>\n      <div className=\"sendbird-openchannel-user-message__right\">\n        {\n          !chainTop && (\n            <div className=\"sendbird-openchannel-user-message__right__top\">\n              <Label\n                className=\"sendbird-openchannel-user-message__right__top__sender-name\"\n                type={LabelTypography.CAPTION_2}\n                color={isByMe ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2}\n              >\n                {\n                  sender && (\n                    sender.friendName\n                    || sender.nickname\n                    || sender.userId\n                  )\n                }\n              </Label>\n              <Label\n                className=\"sendbird-openchannel-user-message__right__top__sent-at\"\n                type={LabelTypography.CAPTION_3}\n                color={LabelColors.ONBACKGROUND_3}\n              >\n                {\n                  message.createdAt && (\n                    format(message.createdAt, 'p')\n                  )\n                }\n              </Label>\n            </div>\n          )\n        }\n        <div className=\"sendbird-openchannel-user-message__right__bottom\">\n          <Label\n            className=\"sendbird-openchannel-user-message__right__bottom__message\"\n            type={LabelTypography.BODY_1}\n            color={LabelColors.ONBACKGROUND_1}\n          >\n            {MemoizedMessageText()}\n          </Label>\n        </div>\n        {\n          (isPending || isFailed) && (\n            <div className=\"sendbird-openchannel-user-message__right__tail\">\n              {\n                isPending && (\n                  <Loader\n                    width=\"16px\"\n                    height=\"16px\"\n                  >\n                    <Icon\n                      className=\"sendbird-openchannel-user-message__right__tail__pending\"\n                      type={IconTypes.SPINNER}\n                      fillColor={IconColors.PRIMARY}\n                      width=\"16px\"\n                      height=\"16px\"\n                    />\n                  </Loader>\n                )\n              }\n              {\n                isFailed && (\n                  <Icon\n                    className=\"sendbird-openchannel-user-message__right__tail__failed\"\n                    type={IconTypes.ERROR}\n                    width=\"16px\"\n                    height=\"16px\"\n                  />\n                )\n              }\n            </div>\n          )\n        }\n      </div>\n      {\n        <div\n          className=\"sendbird-openchannel-user-message__context-menu\"\n          ref={contextMenuRef}\n          style={contextStyle}\n        >\n          <ContextMenu\n            menuTrigger={(toggleDropdown) => (\n              showMenuTrigger({ message: message, userId: userId, status: status}) && (\n                <IconButton\n                  className=\"sendbird-openchannel-user-message__context-menu--icon\"\n                  width=\"32px\"\n                  height=\"32px\"\n                  onClick={() => {\n                    toggleDropdown();\n                  }}\n                >\n                  <Icon\n                    type={IconTypes.MORE}\n                    fillColor={IconColors.CONTENT_INVERSE}\n                    width=\"24px\"\n                    height=\"24px\"\n                  />\n                </IconButton>\n              )\n            )}\n            menuItems={(closeDropdown) => (\n              <MenuItems\n                parentRef={contextMenuRef}\n                parentContainRef={contextMenuRef}\n                closeDropdown={closeDropdown}\n                openLeft\n              >\n                {\n                  isFineCopy({ message: message, userId: userId, status: status }) && (\n                    <MenuItem\n                      className=\"sendbird-openchannel-user-message__context-menu__copy\"\n                      onClick={() => {\n                        copyToClipboard(message.message);\n                        closeDropdown();\n                      }}\n                    >\n                      {stringSet.CONTEXT_MENU_DROPDOWN__COPY}\n                    </MenuItem>\n                  )\n                }\n                {\n                  isFineEdit({ message: message, userId: userId, status: status }) && (\n                    <MenuItem\n                      className=\"sendbird-openchannel-user-message__context-menu__edit\"\n                      onClick={() => {\n                        if (disabled) {\n                          return;\n                        }\n                        showEdit(true);\n                        closeDropdown();\n                      }}\n                    >\n                      {stringSet.CONTEXT_MENU_DROPDOWN__EDIT}\n                    </MenuItem>\n                  )\n                }\n                {\n                  isFineResend({ message: message, userId: userId, status: status }) && (\n                    <MenuItem\n                      className=\"sendbird-openchannel-user-message__context-menu__resend\"\n                      onClick={() => {\n                        resendMessage(message);\n                        closeDropdown();\n                      }}\n                    >\n                      {stringSet.CONTEXT_MENU_DROPDOWN__RESEND}\n                    </MenuItem>\n                  )\n                }\n                {\n                  isFineDelete({ message: message, userId: userId, status: status }) && (\n                    <MenuItem\n                      className=\"sendbird-openchannel-user-message__context-menu__delete\"\n                      onClick={() => {\n                        if (disabled) {\n                          return;\n                        }\n                        showRemove(true);\n                        closeDropdown();\n                      }}\n                    >\n                      {stringSet.CONTEXT_MENU_DROPDOWN__DELETE}\n                    </MenuItem>\n                  )\n                }\n              </MenuItems>\n            )}\n          />\n        </div>\n      }\n    </div>\n  );\n}\n","import React, { ReactElement } from 'react';\nimport { ClientAdminMessage } from '../../index';\nimport './index.scss';\n\nimport Label, { LabelColors, LabelTypography } from '../Label';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: ClientAdminMessage;\n}\n\nexport default function OpenChannelAdminMessage({\n  className,\n  message,\n}: Props): ReactElement {\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-openchannel-admin-message',\n      ].join(' ')}\n    >\n      <Label\n        className=\"sendbird-openchannel-admin-message__text\"\n        type={LabelTypography.CAPTION_2}\n        color={LabelColors.ONBACKGROUND_2}\n      >\n        {message.message || ''}\n      </Label>\n    </div>\n  );\n}\n","import Sendbird from 'sendbird';\n\nexport const URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nexport const createUrlTester = (regexp: RegExp) => (text: string): boolean => regexp.test(text);\nexport const checkOGIsEnalbed = (message: Sendbird.UserMessage): boolean => {\n  const { ogMetaData } = message;\n  if (!ogMetaData) {\n    return false;\n  }\n  const { url } = ogMetaData;\n  if (!url) {\n    return false;\n  }\n  return true;\n};\n","import React, { useState, useContext, useMemo, useRef, useEffect } from 'react';\nimport format from 'date-fns/format';\nimport './index.scss';\n\nimport Avatar from '../Avatar';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport ImageRenderer from '../ImageRenderer';\nimport LinkLabel from '../LinkLabel';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Loader from '../Loader';\nimport UserProfile from '../UserProfile';\nimport { UserProfileContext } from '../../lib/UserProfileContext';\n\nimport uuidv4 from '../../utils/uuid';\nimport { copyToClipboard } from '../OpenchannelUserMessage/utils';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { checkOGIsEnalbed, createUrlTester, URL_REG } from './utils';\nimport { ClientUserMessage } from '../../index';\nimport {\n  checkIsByMe,\n  checkIsPending,\n  checkIsFailed,\n  isFineCopy,\n  isFineEdit,\n  isFineResend,\n  isFineDelete,\n  showMenuTrigger,\n} from '../../utils/openChannelUtils';\nimport { getSenderFromMessage } from '../../utils/openChannelUtils';\n\ninterface Props {\n  message: ClientUserMessage;\n  className?: string | Array<string>;\n  disabled?: boolean;\n  showEdit(bool: boolean): void;\n  showRemove(bool: boolean): void;\n  resendMessage(message: ClientUserMessage): void;\n  chainTop?: boolean;\n  chainBottom?: boolean;\n  status: string;\n  userId: string;\n}\n\nexport default function OpenchannelOGMessage({\n  message,\n  className,\n  disabled,\n  showEdit,\n  showRemove,\n  resendMessage,\n  chainTop,\n  status,\n  userId,\n}: Props): JSX.Element {\n  if (!message || message.messageType !== 'user') {\n    return null;\n  }\n\n  const { ogMetaData } = message;\n  const { defaultImage } = ogMetaData;\n\n  const { stringSet } = useContext(LocalizationContext);\n  const { disableUserProfile, renderUserProfile } = useContext(UserProfileContext);\n  const [contextStyle, setContextStyle] = useState({});\n  const messageComponentRef = useRef(null);\n  const contextMenuRef = useRef(null);\n  const avatarRef = useRef(null);\n\n  const isUrl = createUrlTester(URL_REG);\n  const isByMe = checkIsByMe(message, userId);\n  const isPending = checkIsPending(status);\n  const isFailed = checkIsFailed(status);\n  const sender = getSenderFromMessage(message);\n\n  const MemoizedMessageText = useMemo(() => () => {\n    const wordClassName = 'sendbird-openchannel-og-message--word';\n    const splitMessage = message.message.split(' ');\n    const matchedMessage = splitMessage\n      .map((word) => (\n        isUrl(word)\n          ? (\n            <LinkLabel\n              key={uuidv4()}\n              className={[\n                wordClassName,\n                'sendbird-openchannel-og-message--word--link'\n              ]}\n              src={word}\n              type={LabelTypography.BODY_1}\n              color={LabelColors.PRIMARY}\n            >\n              {word}\n            </LinkLabel>\n          )\n          : (\n            <Label\n              key={uuidv4()}\n              className={wordClassName}\n              type={LabelTypography.BODY_1}\n              color={LabelColors.ONBACKGROUND_1}\n            >\n              {word}\n            </Label>\n          )\n      ));\n\n    if (message.updatedAt > 0) {\n      matchedMessage.push(\n        <Label\n          key={uuidv4()}\n          className={wordClassName}\n          type={LabelTypography.BODY_1}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {stringSet.MESSAGE_EDITED}\n        </Label>,\n      );\n    }\n\n    return matchedMessage;\n  }, [message, message.updatedAt]);\n\n  const openLink = () => {\n    if (checkOGIsEnalbed(message)) {\n      const { url } = ogMetaData;\n      window.open(url);\n    }\n  };\n\n  // place conxt menu top depending clientHeight of message component\n  useEffect(() => {\n    if (messageComponentRef.current.clientHeight > 36) {\n      setContextStyle({ top: '8px ' });\n    } else {\n      setContextStyle({ top: '2px' });\n    }\n  }, [window.innerWidth]);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-openchannel-og-message',\n      ].join(' ')}\n      ref={messageComponentRef}\n    >\n      <div\n        className=\"sendbird-openchannel-og-message__top\"\n      >\n        <div className=\"sendbird-openchannel-og-message__top__left\">\n          {\n            !chainTop && (\n              <ContextMenu\n                menuTrigger={(toggleDropdown) => (\n                  <Avatar\n                    className=\"sendbird-openchannel-og-message__top__left__avatar\"\n                    src={sender.profileUrl || ''}\n                    ref={avatarRef}\n                    width=\"28px\"\n                    height=\"28px\"\n                    onClick={() => {\n                      if (!disableUserProfile) {\n                        toggleDropdown();\n                      }\n                    }}\n                  />\n                )}\n                menuItems={(closeDropdown) => (\n                  <MenuItems\n                    parentRef={avatarRef}\n                    parentContainRef={avatarRef}\n                    closeDropdown={closeDropdown}\n                    style={{ paddingTop: 0, paddingBottom: 0 }}\n                  >\n                    {\n                      renderUserProfile\n                        ? (\n                          renderUserProfile({\n                            user: sender,\n                            close: closeDropdown,\n                          })\n                        )\n                        : (\n                          <UserProfile\n                            user={sender}\n                            onSuccess={closeDropdown}\n                            disableMessaging\n                          />\n                        )\n                    }\n                  </MenuItems>\n                )}\n              />\n            )\n          }\n        </div>\n        <div className=\"sendbird-openchannel-og-message__top__right\">\n          {\n            !chainTop && (\n              <div className=\"sendbird-openchannel-og-message__top__right__title\">\n                <Label\n                  className=\"sendbird-openchannel-og-message__top__right__title__sender-name\"\n                  type={LabelTypography.CAPTION_2}\n                  color={isByMe ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2}\n                >\n                  {\n                    sender && (\n                      sender.friendName\n                      || sender.nickname\n                      || sender.userId\n                    )\n                  }\n                </Label>\n                <Label\n                  className=\"sendbird-openchannel-og-message__top__right__title__sent-at\"\n                  type={LabelTypography.CAPTION_3}\n                  color={LabelColors.ONBACKGROUND_3}\n                >\n                  {\n                    message.createdAt && (\n                      format(message.createdAt, 'p')\n                    )\n                  }\n                </Label>\n              </div>\n            )\n          }\n          <div className=\"sendbird-openchannel-og-message__top__right__description\">\n            <Label\n              className=\"sendbird-openchannel-og-message__top__right__description__message\"\n              type={LabelTypography.BODY_1}\n              color={LabelColors.ONBACKGROUND_1}\n            >\n              {MemoizedMessageText()}\n            </Label>\n          </div>\n        </div>\n        {\n          <div\n            className=\"sendbird-openchannel-og-message__top__context-menu\"\n            ref={contextMenuRef}\n            style={contextStyle}\n          >\n            <ContextMenu\n              menuTrigger={(toggleDropdown) => (\n                showMenuTrigger({ message: message, userId: userId, status: status }) && (\n                  <IconButton\n                    className=\"sendbird-openchannel-og-message__top__context-menu--icon\"\n                    width=\"32px\"\n                    height=\"32px\"\n                    onClick={() => {\n                      toggleDropdown();\n                    }}\n                  >\n                    <Icon\n                      type={IconTypes.MORE}\n                      fillColor={IconColors.CONTENT_INVERSE}\n                      width=\"24px\"\n                      height=\"24px\"\n                    />\n                  </IconButton>\n                )\n              )}\n              menuItems={(closeDropdown) => (\n                <MenuItems\n                  parentRef={contextMenuRef}\n                  parentContainRef={contextMenuRef}\n                  closeDropdown={closeDropdown}\n                  openLeft\n                >\n                  {\n                    isFineCopy({ message, userId, status }) && (\n                      <MenuItem\n                        className=\"sendbird-openchannel-og-message__top__context-menu__copy\"\n                        onClick={() => {\n                          copyToClipboard(message.message);\n                          closeDropdown();\n                        }}\n                      >\n                        {stringSet.CONTEXT_MENU_DROPDOWN__COPY}\n                      </MenuItem>\n                    )\n                  }\n                  {\n                    isFineEdit({ message, userId, status }) && (\n                      <MenuItem\n                        className=\"sendbird-openchannel-og-message__top__context-menu__edit\"\n                        onClick={() => {\n                          if (disabled) {\n                            return;\n                          }\n                          showEdit(true);\n                          closeDropdown();\n                        }}\n                      >\n                        {stringSet.CONTEXT_MENU_DROPDOWN__EDIT}\n                      </MenuItem>\n                    )\n                  }\n                  {\n                    isFineResend({ message, userId, status }) && (\n                      <MenuItem\n                        className=\"sendbird-openchannel-og-message__top__context-menu__resend\"\n                        onClick={() => {\n                          resendMessage(message);\n                          closeDropdown();\n                        }}\n                      >\n                        {stringSet.CONTEXT_MENU_DROPDOWN__RESEND}\n                      </MenuItem>\n                    )\n                  }\n                  {\n                    isFineDelete({ message, userId, status }) && (\n                      <MenuItem\n                        className=\"sendbird-openchannel-og-message__top__context-menu__delete\"\n                        onClick={() => {\n                          if (disabled) {\n                            return;\n                          }\n                          showRemove(true);\n                          closeDropdown();\n                        }}\n                      >\n                        {stringSet.CONTEXT_MENU_DROPDOWN__DELETE}\n                      </MenuItem>\n                    )\n                  }\n                </MenuItems>\n              )}\n            />\n          </div>\n        }\n      </div>\n      <div className=\"sendbird-openchannel-og-message__bottom\">\n        <div className=\"sendbird-openchannel-og-message__bottom__og-tag\">\n          {\n            ogMetaData.url && (\n              <Label\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__url\"\n                type={LabelTypography.CAPTION_3}\n                color={LabelColors.ONBACKGROUND_2}\n              >\n                {ogMetaData.url}\n              </Label>\n            )\n          }\n          {\n            ogMetaData.title && (\n              <LinkLabel\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__title\"\n                src={ogMetaData.url}\n                type={LabelTypography.SUBTITLE_2}\n                color={LabelColors.PRIMARY}\n              >\n                {\n                  ogMetaData.title\n                }\n              </LinkLabel>\n            )\n          }\n          {\n            ogMetaData.description && (\n              <Label\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__description\"\n                type={LabelTypography.BODY_2}\n                color={LabelColors.ONBACKGROUND_1}\n              >\n                {ogMetaData.description}\n              </Label>\n            )\n          }\n          {\n            ogMetaData.url && (\n              <div\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail\"\n                role=\"button\"\n                onClick={openLink}\n                onKeyDown={openLink}\n                tabIndex={0}\n              >\n                {\n                  defaultImage && (\n                    <ImageRenderer\n                      className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image\"\n                      url={defaultImage.url || ''}\n                      alt={defaultImage.alt || ''}\n                      height=\"189px\"\n                      defaultComponent={(\n                        <div className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder\">\n                          <Icon\n                            type={IconTypes.THUMBNAIL_NONE}\n                            width=\"56px\"\n                            height=\"56px\"\n                          />\n                        </div>\n                      )}\n                    />\n                  )\n                }\n              </div>\n            )\n          }\n        </div>\n        {\n          (isPending || isFailed) && (\n            <div className=\"sendbird-openchannel-og-message__top__right__tail\">\n              {\n                isPending && (\n                  <Loader\n                    width=\"16px\"\n                    height=\"16px\"\n                  >\n                    <Icon\n                      className=\"sendbird-openchannel-og-message__top__right__tail__pending\"\n                      type={IconTypes.SPINNER}\n                      fillColor={IconColors.PRIMARY}\n                      width=\"16px\"\n                      height=\"16px\"\n                    />\n                  </Loader>\n                )\n              }\n              {\n                isFailed && (\n                  <Icon\n                    className=\"sendbird-openchannel-og-message__top__right__tail__failed\"\n                    type={IconTypes.ERROR}\n                    width=\"16px\"\n                    height=\"16px\"\n                  />\n                )\n              }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  );\n}\n","export const SUPPORTING_TYPES = {\n  IMAGE: 'IMAGE',\n  VIDEO: 'VIDEO',\n  UNSUPPORTED: 'UNSUPPORTED',\n};\n\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/webp',\n  ],\n  VIDEO: [\n    'video/mpeg',\n    'video/ogg',\n    'video/webm',\n    'video/mp4',\n  ],\n};\n\nexport const getSupportingFileType = (type: string): string => {\n  if (SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0) {\n    return SUPPORTING_TYPES.IMAGE;\n  }\n  if (SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0) {\n    return SUPPORTING_TYPES.VIDEO;\n  }\n  return SUPPORTING_TYPES.UNSUPPORTED;\n}\n","import React, { useContext, useRef } from 'react';\nimport format from 'date-fns/format';\nimport './index.scss';\nimport { SUPPORTING_TYPES, getSupportingFileType } from './utils';\nimport { ClientFileMessage } from '../../index';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\n\nimport Avatar from '../Avatar';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport ImageRenderer from '../ImageRenderer';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Loader from '../Loader';\nimport UserProfile from '../UserProfile';\nimport { UserProfileContext } from '../../lib/UserProfileContext';\nimport {\n  checkIsByMe,\n  checkIsSent,\n  checkIsPending,\n  checkIsFailed,\n  isFineResend,\n  isFineDelete,\n  showMenuTrigger,\n} from '../../utils/openChannelUtils';\nimport { getSenderFromMessage } from '../../utils/openChannelUtils';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: ClientFileMessage;\n  disabled: boolean;\n  userId: string;\n  status: string;\n  chainTop: boolean;\n  chainBottom: boolean;\n  onClick(bool: boolean): void,\n  showRemove(bool: boolean): void,\n  resendMessage(message: ClientFileMessage): void;\n}\n\nexport default function OpenchannelThumbnailMessage({\n  className,\n  message,\n  disabled,\n  userId,\n  status,\n  chainTop,\n  onClick,\n  showRemove,\n  resendMessage,\n}: Props): JSX.Element {\n  const {\n    type,\n    url,\n    localUrl,\n    thumbnails,\n  } = message;\n  const thumbnailUrl = (thumbnails && thumbnails.length > 0 && thumbnails[0].url) || null;\n  const { stringSet } = useContext(LocalizationContext);\n  const { disableUserProfile, renderUserProfile } = useContext(UserProfileContext);\n  const contextMenuRef = useRef(null);\n  const avatarRef = useRef(null);\n\n  const isByMe = checkIsByMe(message, userId);\n  const isMessageSent = checkIsSent(status);\n  const isPending = checkIsPending(status);\n  const isFailed = checkIsFailed(status);\n  const sender = getSenderFromMessage(message);\n\n  return (\n    <div className={[\n      ...(Array.isArray(className) ? className : [className]),\n      'sendbird-openchannel-thumbnail-message',\n    ].join(' ')}>\n      <div className=\"sendbird-openchannel-thumbnail-message__left\">\n        {\n          !chainTop && (\n            <ContextMenu\n              menuTrigger={(toggleDropdown) => (\n                <Avatar\n                  className=\"sendbird-openchannel-thumbnail-message__left__avatar\"\n                  src={sender.profileUrl || ''}\n                  ref={avatarRef}\n                  width=\"28px\"\n                  height=\"28px\"\n                  onClick={() => {\n                    if (!disableUserProfile) {\n                      toggleDropdown();\n                    }\n                  }}\n                />\n              )}\n              menuItems={(closeDropdown) => (\n                <MenuItems\n                  parentRef={avatarRef}\n                  parentContainRef={avatarRef}\n                  closeDropdown={closeDropdown}\n                  style={{ paddingTop: 0, paddingBottom: 0 }}\n                >\n                  {\n                    renderUserProfile\n                      ? (\n                        renderUserProfile({\n                          user: sender,\n                          close: closeDropdown,\n                        })\n                      )\n                      : (\n                        <UserProfile\n                          user={sender}\n                          onSuccess={closeDropdown}\n                          disableMessaging\n                        />\n                      )\n                  }\n                </MenuItems>\n              )}\n            />\n          )\n        }\n      </div>\n      <div className=\"sendbird-openchannel-thumbnail-message__right\">\n        {\n          !chainTop && (\n            <div className=\"sendbird-openchannel-thumbnail-message__right__title\">\n              <Label\n                className=\"sendbird-openchannel-thumbnail-message__right__title__sender-name\"\n                type={LabelTypography.CAPTION_2}\n                color={isByMe ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2}\n              >\n                {\n                  sender && (\n                    sender.friendName\n                    || sender.nickname\n                    || sender.userId\n                  )\n                }\n              </Label>\n              <Label\n                className=\"sendbird-openchannel-thumbnail-message__right__title__sent-at\"\n                type={LabelTypography.CAPTION_3}\n                color={LabelColors.ONBACKGROUND_3}\n              >\n                {\n                  message.createdAt && (\n                    format(message.createdAt, 'p')\n                  )\n                }\n              </Label>\n            </div>\n          )\n        }\n        <div className=\"sendbird-openchannel-thumbnail-message__right__body\">\n          <div\n            className=\"sendbird-openchannel-thumbnail-message__right__body__wrap\"\n            role=\"button\"\n            onClick={() => {\n              if (isMessageSent) {\n                onClick(true);\n              }\n            }}\n            onKeyDown={() => {\n              if (isMessageSent) {\n                onClick(true);\n              }\n            }}\n            tabIndex={0}\n          >\n            <div className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay\" />\n            {\n              {\n                [SUPPORTING_TYPES.VIDEO]: (\n                  (url || localUrl)\n                    ? (\n                      <div className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video\" >\n                        {\n                          (thumbnailUrl)\n                            ? (\n                              <ImageRenderer\n                                className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video\"\n                                url={thumbnailUrl}\n                                alt=\"image\"\n                                height=\"270px\"\n                              />\n                            )\n                            : (\n                              <video className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video\">\n                                <source src={url || localUrl} type={type} />\n                              </video>\n                            )\n                        }\n                        <Icon\n                          className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon\"\n                          type={IconTypes.PLAY}\n                          width=\"56px\"\n                          height=\"56px\"\n                        />\n                      </div>\n                    )\n                    : (\n                      <Icon\n                        className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon\"\n                        type={IconTypes.PHOTO}\n                        fillColor={IconColors.ON_BACKGROUND_2}\n                        width=\"56px\"\n                        height=\"56px\"\n                      />\n                    )\n                ),\n                [SUPPORTING_TYPES.IMAGE]: (\n                  (url || localUrl)\n                    ? (\n                      <ImageRenderer\n                        className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__image\"\n                        url={thumbnailUrl || url || localUrl}\n                        alt=\"image\"\n                        width=\"360px\"\n                        height=\"270px\"\n                      />\n                    )\n                    : (\n                      <Icon\n                        className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon\"\n                        type={IconTypes.PHOTO}\n                        fillColor={IconColors.ON_BACKGROUND_2}\n                        width=\"56px\"\n                        height=\"56px\"\n                      />\n                    )\n                ),\n                [SUPPORTING_TYPES.UNSUPPORTED]: (\n                  <Icon\n                    className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown\"\n                    type={IconTypes.PHOTO}\n                    fillColor={IconColors.ON_BACKGROUND_2}\n                    width=\"56px\"\n                    height=\"56px\"\n                  />\n                ),\n              }[getSupportingFileType(type)]\n            }\n          </div>\n        </div>\n        {\n          (isPending || isFailed) && (\n            <div className=\"sendbird-openchannel-thumbnail-message__right__tail\">\n              {\n                isPending && (\n                  <Loader\n                    width=\"16px\"\n                    height=\"16px\"\n                  >\n                    <Icon\n                      className=\"sendbird-openchannel-thumbnail-message__right__tail__pending\"\n                      type={IconTypes.SPINNER}\n                      fillColor={IconColors.PRIMARY}\n                      width=\"16px\"\n                      height=\"16px\"\n                    />\n                  </Loader>\n                )\n              }\n              {\n                isFailed && (\n                  <Icon\n                    className=\"sendbird-openchannel-thumbnail-message__right__tail__failed\"\n                    type={IconTypes.ERROR}\n                    width=\"16px\"\n                    height=\"16px\"\n                  />\n                )\n              }\n            </div>\n          )\n        }\n      </div>\n      <div\n        className=\"sendbird-openchannel-thumbnail-message__context-menu\"\n        ref={contextMenuRef}\n      >\n        <ContextMenu\n          menuTrigger={(toggleDropdown) => (\n            showMenuTrigger({ message, userId, status }) && (\n              <IconButton\n                className=\"sendbird-openchannel-thumbnail-message__context-menu--icon\"\n                width=\"32px\"\n                height=\"32px\"\n                onClick={toggleDropdown}\n              >\n                <Icon\n                  type={IconTypes.MORE}\n                  fillColor={IconColors.CONTENT_INVERSE}\n                  width=\"24px\"\n                  height=\"24px\"\n                />\n              </IconButton>\n            )\n          )}\n          menuItems={(closeDropdown) => (\n            <MenuItems\n              parentRef={contextMenuRef}\n              parentContainRef={contextMenuRef}\n              closeDropdown={closeDropdown}\n              openLeft\n            >\n              {\n                isFineResend({ message, userId, status }) && (\n                  <MenuItem\n                    onClick={() => {\n                      resendMessage(message);\n                      closeDropdown();\n                    }}\n                  >\n                    {stringSet.CONTEXT_MENU_DROPDOWN__RESEND}\n                  </MenuItem>\n                )\n              }\n              {\n                isFineDelete({ message, userId, status }) && (\n                  <MenuItem\n                    onClick={() => {\n                      if (disabled) {\n                        return;\n                      }\n                      showRemove(true);\n                      closeDropdown();\n                    }}\n                  >\n                    {stringSet.CONTEXT_MENU_DROPDOWN__DELETE}\n                  </MenuItem>\n                )\n              }\n            </MenuItems>\n          )}\n        />\n      </div>\n    </div>\n  );\n}\n","import { IconTypes } from '../Icon';\n\nexport const checkFileType = (fileUrl: string): string => {\n  let result = null;\n  const imageFile = /(\\.gif|\\.jpg|\\.jpeg|\\.txt|\\.pdf)$/i;\n  const audioFile = /(\\.mp3)$/i;\n  if (imageFile.test(fileUrl)) {\n    result = IconTypes.FILE_DOCUMENT;\n  } else if (audioFile.test(fileUrl)) {\n    result = IconTypes.FILE_AUDIO;\n  }\n  return result;\n}\n\nexport const truncate = (fullStr:string, strLen: number): string => {\n  if (fullStr === null || fullStr === undefined) return '';\n  if (fullStr.length <= strLen) return fullStr;\n  const separator = '...';\n  const sepLen = separator.length;\n  const charsToShow = strLen - sepLen;\n  const frontChars = Math.ceil(charsToShow / 2);\n  const backChars = Math.floor(charsToShow / 2);\n  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);\n};\n","import React, { useContext, useRef } from 'react';\nimport format from 'date-fns/format';\nimport './index.scss';\n\nimport Avatar from '../Avatar';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Loader from '../Loader';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport TextButton from '../TextButton';\nimport UserProfile from '../UserProfile';\nimport { UserProfileContext } from '../../lib/UserProfileContext';\n\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { checkFileType, truncate } from './utils';\nimport { ClientFileMessage } from '../../index';\nimport {\n  checkIsByMe,\n  checkIsPending,\n  checkIsFailed,\n  isFineDelete,\n  isFineResend,\n  showMenuTrigger,\n} from '../../utils/openChannelUtils';\nimport { getSenderFromMessage } from '../../utils/openChannelUtils';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: ClientFileMessage;\n  userId: string;\n  disabled?: boolean;\n  chainTop?: boolean;\n  chainBottom?: boolean;\n  status: string;\n  showRemove(bool: boolean): void;\n  resendMessage(message: ClientFileMessage): void;\n}\n\nexport default function OpenchannelFileMessage({\n  className,\n  message,\n  userId,\n  disabled,\n  chainTop,\n  status,\n  showRemove,\n  resendMessage,\n}: Props): JSX.Element {\n  const contextMenuRef = useRef(null);\n  const avatarRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const { disableUserProfile, renderUserProfile } = useContext(UserProfileContext);\n\n  const openFileUrl = () => { window.open(message.url); };\n\n  const isByMe = checkIsByMe(message, userId);\n  const isPending = checkIsPending(status);\n  const isFailed = checkIsFailed(status);\n  const sender = getSenderFromMessage(message);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-openchannel-file-message',\n      ].join(' ')}\n    >\n      <div className=\"sendbird-openchannel-file-message__left\">\n        {\n            !chainTop && (\n              <ContextMenu\n                menuTrigger={(toggleDropdown) => (\n                  <Avatar\n                    className=\"sendbird-openchannel-file-message__left__avatar\"\n                    src={sender.profileUrl || ''}\n                    ref={avatarRef}\n                    width=\"28px\"\n                    height=\"28px\"\n                    onClick={() => {\n                      if (!disableUserProfile) {\n                        toggleDropdown();\n                      }\n                    }}\n                  />\n                )}\n                menuItems={(closeDropdown) => (\n                  <MenuItems\n                    parentRef={avatarRef}\n                    parentContainRef={avatarRef}\n                    closeDropdown={closeDropdown}\n                    style={{ paddingTop: 0, paddingBottom: 0 }}\n                  >\n                    {\n                      renderUserProfile\n                      ? (\n                        renderUserProfile({\n                          user: sender,\n                          close: closeDropdown,\n                        })\n                      )\n                      : (\n                        <UserProfile\n                          user={sender}\n                          onSuccess={closeDropdown}\n                          disableMessaging\n                        />\n                      )\n                    }\n                  </MenuItems>\n                )}\n              />\n            )\n          }\n      </div>\n      <div className=\"sendbird-openchannel-file-message__right\">\n        {\n          !chainTop && (\n            <div className=\"sendbird-openchannel-file-message__right__title\">\n              <Label\n                className=\"sendbird-openchannel-file-message__right__title__sender-name\"\n                type={LabelTypography.CAPTION_2}\n                color={isByMe ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2}\n              >\n                {\n                  sender && (\n                    sender.friendName\n                    || sender.nickname\n                    || sender.userId\n                  )\n                }\n              </Label>\n              <Label\n                className=\"sendbird-openchannel-file-message__right__title__sent-at\"\n                type={LabelTypography.CAPTION_3}\n                color={LabelColors.ONBACKGROUND_3}\n              >\n                {\n                  message.createdAt && (\n                    format(message.createdAt, 'p')\n                  )\n                }\n              </Label>\n            </div>\n          )\n        }\n        <div className=\"sendbird-openchannel-file-message__right__body\">\n          {\n            checkFileType(message.url) && (\n              <Icon\n                className=\"sendbird-openchannel-file-message__right__body__icon\"\n                type={checkFileType(message.url)}\n                fillColor={IconColors.PRIMARY}\n                width=\"48px\"\n                height=\"48px\"\n              />\n            )\n          }\n          <TextButton\n            className=\"sendbird-openchannel-file-message__right__body__file-name\"\n            onClick={openFileUrl}\n          >\n            <Label\n              type={LabelTypography.BODY_1}\n              color={LabelColors.ONBACKGROUND_1}\n            >\n              {truncate(message.name || message.url, 40)}\n            </Label>\n          </TextButton>\n        </div>\n        {\n          (isPending || isFailed) && (\n            <div className=\"sendbird-openchannel-file-message__right__tail\">\n              {\n                isPending && (\n                  <Loader\n                    width=\"16px\"\n                    height=\"16px\"\n                  >\n                    <Icon\n                      className=\"sendbird-openchannel-file-message__right__tail__pending\"\n                      type={IconTypes.SPINNER}\n                      fillColor={IconColors.PRIMARY}\n                      width=\"16px\"\n                      height=\"16px\"\n                    />\n                  </Loader>\n                )\n              }\n              {\n                isFailed && (\n                  <Icon\n                    className=\"sendbird-openchannel-file-message__right__tail__failed\"\n                    type={IconTypes.ERROR}\n                    width=\"16px\"\n                    height=\"16px\"\n                  />\n                )\n              }\n            </div>\n          )\n        }\n      </div>\n      <div\n        className=\"sendbird-openchannel-file-message__context-menu\"\n        ref={contextMenuRef}\n      >\n        {\n            <ContextMenu\n              menuTrigger={(toggleDropdown) => (\n                showMenuTrigger({ message, userId, status }) && (\n                  <IconButton\n                    className=\"sendbird-openchannel-file-message__context-menu__icon\"\n                    width=\"32px\"\n                    height=\"32px\"\n                    onClick={toggleDropdown}\n                  >\n                    <Icon\n                      type={IconTypes.MORE}\n                      width=\"24px\"\n                      height=\"24px\"\n                    />\n                  </IconButton>\n                )\n              )}\n              menuItems={(closeDropdown) => (\n                <MenuItems\n                  parentRef={contextMenuRef}\n                  parentContainRef={contextMenuRef}\n                  closeDropdown={closeDropdown}\n                  openLeft\n                >\n                  {\n                    isFineResend({ message, userId, status }) && (\n                      <MenuItem\n                        onClick={() => {\n                          if (disabled) { return; }\n                          resendMessage(message);\n                          closeDropdown();\n                        }}\n                      >\n                        {stringSet.CONTEXT_MENU_DROPDOWN__RESEND}\n                      </MenuItem>\n                    )\n                  }\n                  {\n                    isFineDelete({ message, userId, status }) && (\n                      <MenuItem\n                        onClick={() => {\n                          if (disabled) { return; }\n                          showRemove(true);\n                          closeDropdown();\n                        }}\n                      >\n                        {stringSet.CONTEXT_MENU_DROPDOWN__DELETE}\n                      </MenuItem>\n                    )\n                  }\n                </MenuItems>\n              )}\n            />\n        }\n      </div>\n    </div>\n  );\n}\n","import React, { useContext } from 'react'\nimport { ClientFileMessage, ClientUserMessage } from '../../..'\nimport Modal from '../../../ui/Modal';\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\n\ninterface Props {\n  onCloseModal(): void;\n  onDeleteMessage(message: ClientUserMessage | ClientFileMessage, callback?: () => void): void;\n}\n\nexport default function RemoveMessageModal({\n  onCloseModal,\n  onDeleteMessage,\n}: Props): JSX.Element {\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <Modal\n      onCancel={onCloseModal}\n      onSubmit={onDeleteMessage}\n      submitText=\"Delete\"\n      titleText={stringSet.MODAL__DELETE_MESSAGE__TITLE}\n    />\n  );\n}\n","import { EveryMessage } from '../../..';\nimport { isImage, isVideo } from '../../../ui/FileViewer/types';\n\nexport const MessageTypes = {\n  ADMIN: 'ADMIN',\n  USER: 'USER',\n  FILE: 'FILE',\n  THUMBNAIL: 'THUMBNAIL',\n  OG: 'OG',\n  UNKNOWN: 'UNKNOWN',\n};\n\nexport const SendingMessageStatus = {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n};\n\nexport const getMessageType = (message: EveryMessage): string => {\n  if ((message.isUserMessage && message.isUserMessage()) || message.messageType === 'user') {\n    return (message.ogMetaData)\n      ? MessageTypes.OG\n      : MessageTypes.USER;\n  }\n  if (message.isAdminMessage && message.isAdminMessage()) {\n    return MessageTypes.ADMIN;\n  }\n  if (message.messageType === 'file') {\n    return (isImage(message.type) || isVideo(message.type))\n      ? MessageTypes.THUMBNAIL\n      : MessageTypes.FILE;\n  }\n  return MessageTypes.UNKNOWN;\n};\n\nexport default {\n  MessageTypes,\n  SendingMessageStatus,\n  getMessageType,\n};\n","import React, {\n  useState,\n  useRef,\n  ReactElement,\n  useMemo,\n} from 'react';\n\nimport format from 'date-fns/format';\nimport * as types from '../../../index';\n\nimport OpenChannelUserMessage from '../../../ui/OpenchannelUserMessage';\nimport OpenChannelAdminMessage from '../../../ui/OpenChannelAdminMessage';\nimport OpenChannelOGMessage from '../../../ui/OpenchannelOGMessage';\nimport OpenChannelThumbnailMessage from '../../../ui/OpenchannelThumbnailMessage';\nimport OpenChannelFileMessage from '../../../ui/OpenchannelFileMessage';\n// import UnknownMessage from '../../../ui/UnknownMessage';\n\nimport DateSeparator from '../../../ui/DateSeparator';\nimport Label, { LabelTypography, LabelColors } from '../../../ui/Label';\nimport MessageInput from '../../../ui/MessageInput';\nimport FileViewer from '../../../ui/FileViewer';\n\nimport RemoveMessageModal from './RemoveMessageModal';\nimport {\n  MessageTypes,\n  SendingMessageStatus,\n  getMessageType,\n} from './types';\nimport { OpenChannel } from 'sendbird';\n\ninterface Props {\n  message: types.EveryMessage;\n  userId: string;\n  disabled: boolean;\n  editDisabled: boolean;\n  hasSeperator: boolean;\n  channel: OpenChannel;\n  renderCustomMessage?: types.RenderCustomMessage,\n  deleteMessage(message: types.ClientUserMessage | types.ClientFileMessage, callback?: () => void): void;\n  updateMessage(messageId: number, text: string, callback?: () => void): void;\n  resendMessage(failedMessage: types.ClientUserMessage | types.ClientFileMessage): void;\n  status?: string;\n  chainTop: boolean;\n  chainBottom: boolean;\n}\n\nexport default function MessageHoc({\n  message,\n  userId,\n  disabled,\n  editDisabled,\n  hasSeperator,\n  channel,\n  renderCustomMessage,\n  deleteMessage,\n  updateMessage,\n  resendMessage,\n  status,\n  chainTop,\n  chainBottom,\n}: Props): ReactElement {\n  let sender: SendBird.User = null;\n  if (message.messageType !== 'admin') {\n    sender = message.sender;\n  }\n\n  const RenderedMessage = useMemo(() => {\n    if (renderCustomMessage) {\n      return renderCustomMessage(message, channel, chainTop, chainBottom);\n    }\n    return null;\n  }, [message, renderCustomMessage]);\n\n  const [showEdit, setShowEdit] = useState(false);\n  const [showRemove, setShowRemove] = useState(false);\n  const [showFileViewer, setShowFileViewer] = useState(false);\n  const editMessageInputRef = useRef(null);\n\n  let isByMe = false;\n\n  if (sender && message.messageType !== 'admin') {\n    // pending and failed messages are by me\n    isByMe = (userId === sender.userId)\n      || (message.requestState === SendingMessageStatus.PENDING)\n      || (message.requestState === SendingMessageStatus.FAILED);\n  }\n\n  if(RenderedMessage) {\n    return (\n      <div className=\"sendbird-msg-hoc sendbird-msg--scroll-ref\">\n        <RenderedMessage message={message} />\n      </div>\n    );\n  }\n\n  if (message.messageType === 'user' && showEdit) {\n    return (\n      <MessageInput\n        isEdit\n        disabled={editDisabled}\n        ref={editMessageInputRef}\n        name={message.messageId}\n        onSendMessage={updateMessage}\n        onCancelEdit={() => { setShowEdit(false); }}\n        value={message.message}\n      />\n    );\n  }\n\n  return (\n    <div className=\"sendbird-msg-hoc sendbird-msg--scroll-ref\">\n      {/* date-seperator */}\n      {\n        hasSeperator && (\n          <DateSeparator>\n            <Label type={LabelTypography.CAPTION_2} color={LabelColors.ONBACKGROUND_2}>\n              {format(message.createdAt, 'MMMM dd, yyyy')}\n            </Label>\n          </DateSeparator>\n        )\n      }\n      {/* Message */}\n      {\n        {\n          [MessageTypes.ADMIN]: (() => {\n            if (message.messageType === 'admin') {\n              return (\n                <OpenChannelAdminMessage message={message} />\n              )\n            }\n          })(),\n          [MessageTypes.FILE]: (() => {\n            if (message.messageType === 'file') {\n              return (\n                <OpenChannelFileMessage\n                  message={message}\n                  disabled={disabled}\n                  userId={userId}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  status={status}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.OG]: (() => {\n            if (message.messageType === 'user') {\n              return (\n                <OpenChannelOGMessage\n                  message={message}\n                  status={status}\n                  userId={userId}\n                  showEdit={setShowEdit}\n                  disabled={disabled}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.THUMBNAIL]: (() => {\n            if (message.messageType === 'file') {\n              return (\n                <OpenChannelThumbnailMessage\n                  message={message}\n                  disabled={disabled}\n                  userId={userId}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  onClick={setShowFileViewer}\n                  status={status}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.USER]: (() => {\n            if (message.messageType === 'user') {\n              return (\n                <OpenChannelUserMessage\n                  message={message}\n                  userId={userId}\n                  disabled={disabled}\n                  showEdit={setShowEdit}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  status={status}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.UNKNOWN]: (() => {\n            return;\n            // return (\n            //   <OpenChannelUnknownMessage message={message} />\n            // );\n          })(),\n        }[getMessageType(message)]\n      }\n      {/* Modal */}\n      {\n        showRemove && (\n          <RemoveMessageModal\n            onCloseModal={() => setShowRemove(false)}\n            onDeleteMessage={() => {\n              if (message.messageType !== 'admin') {\n                deleteMessage(message);\n              }\n            }}\n          />\n        )\n      }\n      {\n        (showFileViewer && message.messageType === 'file') && (\n          <FileViewer\n            onClose={() => setShowFileViewer(false)}\n            message={message}\n            onDelete={() => deleteMessage(message)}\n            isByMe={isByMe}\n          />\n        )\n      }\n      {/* {\n        !((message.isFileMessage && message.isFileMessage()) || message.messageType === 'file')\n        && !(message.isAdminMessage && message.isAdminMessage())\n        && !(((message.isUserMessage && message.isUserMessage()) || message.messageType === 'user'))\n        && !(showFileViewer)\n        && (\n          <UnknownMessage\n            message={message}\n            status={status}\n            isByMe={isByMe}\n            showRemove={setShowRemove}\n            chainTop={chainTop}\n            chainBottom={chainBottom}\n          />\n        )\n      } */}\n    </div>\n  );\n}\n","import React, { ReactElement, useRef, useState, useMemo } from 'react';\nimport isSameDay from 'date-fns/isSameDay';\nimport {\n  ClientFileMessage,\n  ClientUserMessage,\n  EveryMessage,\n  RenderCustomMessage,\n} from '../../../index';\nimport MessageHoc from './MessageHOC';\nimport Icon, { IconTypes, IconColors } from '../../../ui/Icon';\n\nimport PlaceHolder, { PlaceHolderTypes } from '../../../ui/PlaceHolder';\nimport './openchannel-conversation-scroll.scss';\nimport { compareMessagesForGrouping } from '../utils';\n\ninterface Props {\n  openchannel: SendBird.OpenChannel;\n  user: SendBird.User;\n  allMessages: Array<EveryMessage>;\n  useMessageGrouping: boolean;\n  isOnline: boolean;\n  hasMore: boolean;\n  renderCustomMessage?: RenderCustomMessage;\n  onScroll(callback?: () => void): void;\n  updateMessage(messageId: number, text: string, callback?: () => void): void;\n  deleteMessage(message: ClientUserMessage | ClientFileMessage, callback?: () => void): void;\n  resendMessage(failedMessage: ClientUserMessage | ClientFileMessage): void;\n}\n\nfunction OpenchannelConversationScroll(\n  {\n    useMessageGrouping = true,\n    openchannel,\n    user,\n    allMessages,\n    isOnline = true,\n    hasMore,\n    onScroll,\n    renderCustomMessage,\n    updateMessage,\n    deleteMessage,\n    resendMessage,\n  }: Props,\n  ref: React.RefObject<HTMLDivElement>,\n): ReactElement {\n  const scrollRef = ref || useRef(null);\n  const [showScrollDownButton, setShowScrollDownButton] = useState(false);\n\n  const handleOnScroll = (e) => {\n    const element = e.target;\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight,\n    } = element;\n    if (\n      (scrollHeight > scrollTop + clientHeight)\n      && (window.navigator.userAgent.indexOf('MSIE ') < 0) // don't show button in IE\n    ) {\n      setShowScrollDownButton(true);\n    } else {\n      setShowScrollDownButton(false);\n    }\n\n    if (!hasMore) {\n      return;\n    }\n    if (scrollTop === 0) {\n      const nodes = scrollRef.current.querySelectorAll('.sendbird-msg--scroll-ref');\n      const first = nodes && nodes[0];\n      onScroll(() => {\n        try {\n          first.scrollIntoView();\n        } catch (error) { }\n      });\n    }\n  };\n\n  const scrollToBottom = () => {\n    if (scrollRef && scrollRef.current) {\n      scrollRef.current.scrollTo(0, scrollRef.current.scrollHeight);\n      setShowScrollDownButton(false);\n    }\n  };\n\n  const hasMessage = useMemo(() => {\n    return allMessages.length > 0;\n  }, [allMessages.length]);\n\n  return (\n    <div\n      className=\"sendbird-openchannel-conversation-scroll\"\n      onScroll={handleOnScroll}\n      ref={scrollRef}\n    >\n      <div className=\"sendbird-openchannel-conversation-scroll__container\">\n        <div className=\"sendbird-openchannel-conversation-scroll__container__padding\" />\n        <div className={`sendbird-openchannel-conversation-scroll__container__item-container${hasMessage ? '' : '--no-messages'}`}>\n          {\n            hasMessage\n              ? (\n                allMessages.map((message, index) => {\n                  let status: string;\n\n                  if (message.messageType !== 'admin') {\n                    status = message.sendingStatus;\n                  }\n\n                  const previousMessage = allMessages[index - 1];\n                  const nextMessage = allMessages[index - 1];\n\n                  const previousMessageCreatedAt = previousMessage && previousMessage.createdAt;\n                  const currentCreatedAt = message.createdAt;\n                  // https://stackoverflow.com/a/41855608\n                  const hasSeperator = !(previousMessageCreatedAt && (\n                    isSameDay(currentCreatedAt, previousMessageCreatedAt)\n                  ));\n\n                  const [chainTop, chainBottom] = useMessageGrouping\n                    ? compareMessagesForGrouping(previousMessage, message, nextMessage)\n                    : [false, false];\n                  return (\n                    <MessageHoc\n                      renderCustomMessage={renderCustomMessage}\n                      channel={openchannel}\n                      key={message.messageId}\n                      message={message}\n                      status={status}\n                      userId={user.userId}\n                      disabled={!isOnline}\n                      editDisabled={openchannel.isFrozen}\n                      hasSeperator={hasSeperator}\n                      chainTop={chainTop}\n                      chainBottom={chainBottom}\n                      deleteMessage={deleteMessage}\n                      updateMessage={updateMessage}\n                      resendMessage={resendMessage}\n                    />\n                  )\n                })\n              )\n              : (\n                <PlaceHolder\n                  className=\"sendbird-openchannel-conversation-scroll__container__place-holder\"\n                  type={PlaceHolderTypes.NO_MESSAGES}\n                />\n              )\n          }\n        </div>\n        {\n          showScrollDownButton && (\n            <div\n              className=\"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button\"\n              onClick={scrollToBottom}\n              onKeyDown={scrollToBottom}\n              tabIndex={0}\n              role=\"button\"\n            >\n              <Icon\n                width=\"24px\"\n                height=\"24px\"\n                type={IconTypes.CHEVRON_DOWN}\n                fillColor={IconColors.CONTENT}\n              />\n            </div>\n          )\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default React.forwardRef(OpenchannelConversationScroll);\n","export const SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';\nexport const SET_CHANNEL_INVALID = 'SET_CHANNEL_INVALID';\nexport const RESET_MESSAGES = 'RESET_MESSAGES';\nexport const GET_PREV_MESSAGES_START = 'GET_PREV_MESSAGES_START';\nexport const GET_PREV_MESSAGES_SUCESS = 'GET_PREV_MESSAGES_SUCESS';\nexport const GET_PREV_MESSAGES_FAIL = 'GET_PREV_MESSAGES_FAIL';\nexport const SENDING_MESSAGE_FAILED = 'SENDING_MESSAGE_FAILED';\nexport const SENDING_MESSAGE_SUCCEEDED = 'SENDING_MESSAGE_SUCCEEDED';\nexport const SENDING_MESSAGE_START = 'SENDING_MESSAGE_START';\nexport const RESENDING_MESSAGE_START = 'RESENDING_MESSAGE_START';\nexport const FETCH_PARTICIPANT_LIST = 'FETCH_PARTICIPANT_LIST';\nexport const FETCH_BANNED_USER_LIST = 'FETCH_BANNED_USER_LIST';\nexport const FETCH_MUTED_USER_LIST= 'FETCH_MUTED_USER_LIST';\n\n// event handlers\nexport const ON_MESSAGE_RECEIVED = 'ON_MESSAGE_RECEIVED';\nexport const ON_MESSAGE_UPDATED = 'ON_MESSAGE_UPDATED';\nexport const ON_MESSAGE_DELETED = 'ON_MESSAGE_DELETED';\nexport const ON_MESSAGE_DELETED_BY_REQ_ID = 'ON_MESSAGE_DELETED_BY_REQ_ID';\nexport const ON_OPERATOR_UPDATED = 'ON_OPERATOR_UPDATED';\nexport const ON_USER_ENTERED = 'ON_USER_ENTERED';\nexport const ON_USER_EXITED = 'ON_USER_EXITED';\nexport const ON_USER_MUTED = 'ON_USER_MUTED';\nexport const ON_USER_UNMUTED = 'ON_USER_UNMUTED';\nexport const ON_USER_BANNED = 'ON_USER_BANNED';\nexport const ON_USER_UNBANNED = 'ON_USER_UNBANNED';\nexport const ON_CHANNEL_FROZEN = 'ON_CHANNEL_FROZEN';\nexport const ON_CHANNEL_UNFROZEN = 'ON_CHANNEL_UNFROZEN';\nexport const ON_CHANNEL_CHANGED = 'ON_CHANNEL_CHANGED';\nexport const ON_META_DATA_CREATED = 'ON_META_DATA_CREATED';\nexport const ON_META_DATA_UPDATED = 'ON_META_DATA_UPDATED';\nexport const ON_META_DATA_DELETED = 'ON_META_DATA_DELETED';\nexport const ON_META_COUNTERS_CREATED = 'ON_META_COUNTERS_CREATED';\nexport const ON_META_COUNTERS_UPDATED = 'ON_META_COUNTERS_UPDATED';\nexport const ON_META_COUNTERS_DELETED = 'ON_META_COUNTERS_DELETED';\nexport const ON_MENTION_RECEIVED = 'ON_MENTION_RECEIVED';\n","import { State as initialStateInterface } from './initialState';\nimport * as actionTypes from './actionTypes';\n\nimport compareIds from '../../../utils/compareIds.js';\n\n/* eslint-disable  @typescript-eslint/no-explicit-any */\n// @ts-ignore: Unreachable code error\ninterface ActionInterface {\n  type: string;\n  payload?: any;\n}\n\nexport default function reducer(\n  state: initialStateInterface,\n  action: ActionInterface,\n): initialStateInterface {\n  switch (action.type) {\n    case actionTypes.RESET_MESSAGES: {\n      return {\n        ...state,\n        allMessages: [],\n      };\n    }\n\n    case actionTypes.SET_CURRENT_CHANNEL: {\n      const gottenChannel = action.payload;\n      const operators = gottenChannel.operators;\n      if (\n        !state.isInvalid\n        && state.currentOpenChannel\n        && state.currentOpenChannel.url\n        && (state.currentOpenChannel.url === gottenChannel.url)\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        currentOpenChannel: gottenChannel,\n        isInvalid: false,\n        operators: operators,\n        participants: operators,\n        bannedParticipantIds: [],\n        mutedParticipantIds: [],\n      };\n    }\n    case actionTypes.SET_CHANNEL_INVALID: {\n      return {\n        ...state,\n        isInvalid: true,\n      };\n    }\n    case actionTypes.GET_PREV_MESSAGES_START: {\n      return {\n        ...state,\n        loading: true,\n      };\n    }\n    case actionTypes.GET_PREV_MESSAGES_SUCESS:\n    case actionTypes.GET_PREV_MESSAGES_FAIL: {\n      const isFailed = (action.type === actionTypes.GET_PREV_MESSAGES_FAIL);\n      const {\n        currentOpenChannel = {},\n        messages = [],\n        hasMore,\n        lastMessageTimestamp,\n      } = action.payload;\n      const actionChannelUrl = currentOpenChannel.url;\n      const receivedMessages = isFailed ? [] : messages;\n      const _hasMore = isFailed ? false : hasMore;\n      const _lastMessageTimestamp = isFailed ? 0 : lastMessageTimestamp;\n\n      const stateChannel = state.currentOpenChannel;\n      const stateChannelUrl = stateChannel.url;\n\n      if (actionChannelUrl !== stateChannelUrl) {\n        return state;\n      }\n\n      const filteredAllMessages = state.allMessages.filter((message) => (\n        !(receivedMessages.find(({ messageId }) => compareIds(messageId, message.messageId)))\n      ));\n      return {\n        ...state,\n        loading: false,\n        initialized: true,\n        hasMore: _hasMore,\n        lastMessageTimestamp: _lastMessageTimestamp,\n        allMessages: [\n          ...receivedMessages,\n          ...filteredAllMessages,\n        ],\n      };\n    }\n    case actionTypes.SENDING_MESSAGE_START: {\n      const {\n        message,\n        channel,\n      } = action.payload;\n      if (channel.url !== state.currentOpenChannel.url) {\n        return state;\n      }\n      return {\n        ...state,\n        allMessages: [\n          ...state.allMessages,\n          { ...message },\n        ],\n      };\n    }\n    case actionTypes.SENDING_MESSAGE_SUCCEEDED: {\n      const sentMessage = action.payload;\n      const newMessages = state.allMessages.map((m) => (\n        compareIds(m.reqId, sentMessage.reqId) ? sentMessage : m\n      ));\n      return {\n        ...state,\n        allMessages: newMessages,\n      };\n    }\n    case actionTypes.SENDING_MESSAGE_FAILED: {\n      const sentMessage = action.payload;\n      return {\n        ...state,\n        allMessages: state.allMessages.map((m) => (\n          compareIds(m.reqId, sentMessage.reqId) ? sentMessage : m\n        )),\n      };\n    }\n    case actionTypes.RESENDING_MESSAGE_START: {\n      const eventedChannel = action.payload.channel;\n      const resentMessage = action.payload.message;\n      if (eventedChannel.url !== state.currentOpenChannel.url) {\n        return state;\n      }\n      return {\n        ...state,\n        allMessages: state.allMessages.map((m) => (\n          compareIds(m.reqId, resentMessage.reqId) ? resentMessage : m\n        )),\n      };\n    }\n    case actionTypes.FETCH_PARTICIPANT_LIST: {\n      const eventedChannel = action.payload.channel;\n      const fetchedParticipantList = action.payload.users;\n      if (eventedChannel.url !== state.currentOpenChannel.url) {\n        return state;\n      }\n      return {\n        ...state,\n        participants: [... state.participants, ...fetchedParticipantList],\n        // Should check duplication\n      };\n    }\n    case actionTypes.FETCH_BANNED_USER_LIST: {\n      const eventedChannel = action.payload.channel;\n      const fetchedBannedUserList = action.payload.users;\n      if (\n        (eventedChannel.url !== state.currentOpenChannel.url)\n        || !(fetchedBannedUserList.every(user => typeof user.userId === 'string'))\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        bannedParticipantIds: [\n          ... state.bannedParticipantIds,\n          ...fetchedBannedUserList.map(user => user.userId),\n        ],\n        // Should check duplication\n      };\n    }\n    case actionTypes.FETCH_MUTED_USER_LIST: {\n      const eventedChannel = action.payload.channel;\n      const fetchedMutedUserList = action.payload.users;\n      if (\n        (eventedChannel.url !== state.currentOpenChannel.url)\n        || !(fetchedMutedUserList.every(user => typeof user.userId === 'string'))\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        mutedParticipantIds: [\n          ... state.bannedParticipantIds,\n          ...fetchedMutedUserList.map(user => user.userId),\n        ],\n        // Should check duplication\n      };\n    }\n    // events\n    case actionTypes.ON_MESSAGE_RECEIVED: {\n      const eventedChannel = action.payload.channel;\n      const receivedMessage = action.payload.message;\n\n      const {\n        currentOpenChannel\n      } = state;\n\n      if (\n        !compareIds(eventedChannel.url, currentOpenChannel.url)\n        || (\n          !(state.allMessages.map(\n            (message) => message.messageId).indexOf(receivedMessage.messageId) < 0\n        ))\n      ) {\n        return state;\n      }\n\n      return {\n        ...state,\n        allMessages: [...state.allMessages, receivedMessage],\n      };\n    }\n    case actionTypes.ON_MESSAGE_UPDATED: {\n      const eventedChannel = action.payload.channel;\n      const updatedMessage = action.payload.message;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        allMessages: state.allMessages.map((message) => (\n          message.isIdentical(updatedMessage)\n            ? updatedMessage\n            : message\n        )),\n      };\n    }\n    case actionTypes.ON_MESSAGE_DELETED: {\n      const eventedChannel = action.payload.channel;\n      const deletedMessageId = action.payload.messageId;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        allMessages: state.allMessages.filter((message) => (\n          !compareIds(message.messageId, deletedMessageId)\n        )),\n      };\n    }\n    case actionTypes.ON_MESSAGE_DELETED_BY_REQ_ID: {\n      return {\n        ...state,\n        allMessages: state.allMessages.filter((m) => (\n          !compareIds(m.reqId, action.payload)\n        )),\n      };\n    }\n    case actionTypes.ON_OPERATOR_UPDATED: {\n      const eventedChannel = action.payload.channel;\n      const updatedOperators = action.payload.operators;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        currentOpenChannel: {\n          ...state.currentOpenChannel,\n          operators: updatedOperators,\n        },\n        operators: updatedOperators,\n      };\n    }\n    case actionTypes.ON_USER_ENTERED: {\n      const eventedChannel = action.payload.channel;\n      const enteredUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        participants: [...state.participants, enteredUser],\n      };\n    }\n    case actionTypes.ON_USER_EXITED: {\n      const eventedChannel = action.payload.channel;\n      const exitedUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        participants: state.participants.filter((participant) => (\n          !compareIds(participant.userId, exitedUser.userId)\n        )),\n      };\n    }\n    case actionTypes.ON_USER_MUTED: {\n      const eventedChannel = action.payload.channel;\n      const mutedUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (\n        !currentChannel\n        || (currentChannel.url && (currentChannel.url !== eventedChannel.url))\n        || state.mutedParticipantIds.indexOf(mutedUser.userId) >= 0\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        mutedParticipantIds: [...state.mutedParticipantIds, mutedUser.userId],\n      };\n    }\n    case actionTypes.ON_USER_UNMUTED: {\n      const eventedChannel = action.payload.channel;\n      const unmutedUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (\n        !currentChannel\n        || (currentChannel.url && (currentChannel.url !== eventedChannel.url))\n        || state.mutedParticipantIds.indexOf(unmutedUser.userId) < 0\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        mutedParticipantIds: state.mutedParticipantIds.filter(userId => userId !== unmutedUser.userId),\n      };\n    }\n    case actionTypes.ON_USER_BANNED: {\n      const eventedChannel = action.payload.channel;\n      const bannedUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (\n        !currentChannel\n        || (currentChannel.url && (currentChannel.url !== eventedChannel.url))\n        || state.bannedParticipantIds.indexOf(bannedUser.userId) >= 0\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        bannedParticipantIds: [...state.bannedParticipantIds, bannedUser.userId],\n      };\n    }\n    case actionTypes.ON_USER_UNBANNED: {\n      const eventedChannel = action.payload.channel;\n      const unbannedUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (\n        !currentChannel\n        || (currentChannel.url && (currentChannel.url !== eventedChannel.url))\n        || state.bannedParticipantIds.indexOf(unbannedUser.userId) < 0\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        bannedParticipantIds: state.bannedParticipantIds.filter(userId => userId !== unbannedUser.userId),\n      };\n    }\n    case actionTypes.ON_CHANNEL_FROZEN: {\n      const frozenChannel = action.payload;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== frozenChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        frozen: true,\n      };\n    }\n    case actionTypes.ON_CHANNEL_UNFROZEN: {\n      const unfrozenChannel = action.payload;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== unfrozenChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        frozen: false,\n      };\n    }\n    case actionTypes.ON_CHANNEL_CHANGED: {\n      const changedChannel = action.payload;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== changedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        currentOpenChannel: changedChannel,\n      };\n    }\n    case actionTypes.ON_META_DATA_CREATED: {\n      // const eventedChannel = action.payload.channel;\n      // const createdMetaData = action.payload.metaData;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_DATA_UPDATED: {\n      // const eventedChannel = action.payload.channel;\n      // const updatedMetaData = action.payload.metaData;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_DATA_DELETED: {\n      // const eventedChannel = action.payload.channel;\n      // const deletedMetaDataKeys = action.payload.metaDataKeys;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_COUNTERS_CREATED: {\n      // const eventedChannel = action.payload.channel;\n      // const createdMetaCounter = action.payload.metaCounter;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_COUNTERS_UPDATED: {\n      // const eventedChannel = action.payload.channel;\n      // const updatedMetaCounter = action.payload.metaCounter;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_COUNTERS_DELETED: {\n      // const eventedChannel = action.payload.channel;\n      // const deletedMetaCounterKeys = action.payload.metaCounterKeys;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_MENTION_RECEIVED: {\n      // const eventedChannel = action.payload.channel;\n      // const mentionedMessage = action.payload.message;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    default:\n      return state;\n  }\n}\n","import Sendbird from 'sendbird';\nimport { EveryMessage } from '../../../index';\n\nexport interface State {\n  allMessages: Array<EveryMessage>;\n  loading: boolean;\n  initialized: boolean;\n  currentOpenChannel: Sendbird.OpenChannel;\n  isInvalid: boolean;\n  hasMore: boolean;\n  lastMessageTimestamp: number;\n  frozen: boolean;\n  operators: Array<Sendbird.User>;\n  participants: Array<Sendbird.User>;\n  bannedParticipantIds: Array<string | number>;\n  mutedParticipantIds: Array<string | number>;\n}\n\nconst initialState: State = {\n  allMessages: [],\n  loading: false,\n  initialized: false,\n  currentOpenChannel: null,\n  isInvalid: false,\n  hasMore: false,\n  lastMessageTimestamp: 0,\n  frozen: false,\n  operators: [],\n  participants: [],\n  bannedParticipantIds: [],\n  mutedParticipantIds: [],\n};\n\nexport default initialState;\n","import { useEffect } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport * as utils from '../utils';\n\ninterface MainProps {\n  channelUrl: string;\n  sdkInit: boolean;\n  fetchingParticipants: boolean;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messagesDispatcher: ({ type: string, payload: any }) => void;\n}\n\nfunction useSetChannel(\n  { channelUrl, sdkInit, fetchingParticipants }: MainProps,\n  { sdk, logger, messagesDispatcher }: ToolProps,\n): void {\n  useEffect(() => {\n    if (channelUrl && sdkInit && sdk && sdk.OpenChannel) {\n      logger.info('OpenChannel | useSetChannel fetching channel', channelUrl);\n      sdk.OpenChannel.getChannel(channelUrl, (openChannel, error) => {\n        if (!error) {\n          logger.info('OpenChannel | useSetChannel fetched channel', openChannel);\n          messagesDispatcher({\n            type: messageActionTypes.SET_CURRENT_CHANNEL,\n            payload: openChannel,\n          });\n          openChannel.enter((_, error) => {\n            if (error) {\n              logger.warning('OpenChannel | useSetChannel enter channel failed', { channelUrl, error });\n              messagesDispatcher({\n                type: messageActionTypes.SET_CHANNEL_INVALID,\n                payload: null,\n              });\n            }\n            if (fetchingParticipants) {\n              // fetch participants, banned participantIds, muted participantIds\n              const participantListQuery = openChannel.createParticipantListQuery();\n              const bannedParticipantListQuery = openChannel.createBannedUserListQuery();\n              const mutedParticipantListQuery = openChannel.createMutedUserListQuery();\n              utils.fetchWithListQuery(\n                participantListQuery,\n                logger,\n                (users) => {\n                  messagesDispatcher({\n                    type: messageActionTypes.FETCH_PARTICIPANT_LIST,\n                    payload: {\n                      channel: openChannel,\n                      users,\n                    },\n                  });\n                },\n              );\n              utils.fetchWithListQuery(\n                bannedParticipantListQuery,\n                logger,\n                (users) => {\n                  messagesDispatcher({\n                    type: messageActionTypes.FETCH_BANNED_USER_LIST,\n                    payload: {\n                      channel: openChannel,\n                      users,\n                    },\n                  });\n                },\n              );\n              utils.fetchWithListQuery(\n                mutedParticipantListQuery,\n                logger,\n                (users) => {\n                  messagesDispatcher({\n                    type: messageActionTypes.FETCH_MUTED_USER_LIST,\n                    payload: {\n                      channel: openChannel,\n                      users,\n                    },\n                  });\n                },\n              );\n            }\n          });\n        } else {\n          logger.warning('OpenChannel | useSetChannel fetching channel failed', { channelUrl, error });\n          messagesDispatcher({\n            type: messageActionTypes.SET_CHANNEL_INVALID,\n            payload: null,\n          });\n        }\n      });\n      // .then((openChannel) => {\n      //   logger.info('OpenChannel | useSetChannel fetched channel', openChannel);\n      //   messagesDispatcher({\n      //     type: messageActionTypes.SET_CURRENT_CHANNEL,\n      //     payload: openChannel,\n      //   });\n      //   openChannel.enter((_, error) => {\n      //     if (error) {\n      //       logger.warning('OpenChannel | useSetChannel enter channel failed', { channelUrl, error });\n      //       messagesDispatcher({\n      //         type: messageActionTypes.SET_CHANNEL_INVALID,\n      //       });\n      //     }\n      //     if (fetchingParticipants) {\n      //       // fetch participants, banned participantIds, muted participantIds\n      //       const participantListQuery = openChannel.createParticipantListQuery();\n      //       const bannedParticipantListQuery = openChannel.createBannedUserListQuery();\n      //       const mutedParticipantListQuery = openChannel.createMutedUserListQuery();\n      //       utils.fetchWithListQuery(\n      //         participantListQuery,\n      //         logger,\n      //         (users) => {\n      //           messagesDispatcher({\n      //             type: messageActionTypes.FETCH_PARTICIPANT_LIST,\n      //             payload: {\n      //               channel: openChannel,\n      //               users,\n      //             },\n      //           });\n      //         },\n      //       );\n      //       utils.fetchWithListQuery(\n      //         bannedParticipantListQuery,\n      //         logger,\n      //         (users) => {\n      //           messagesDispatcher({\n      //             type: messageActionTypes.FETCH_BANNED_USER_LIST,\n      //             payload: {\n      //               channel: openChannel,\n      //               users,\n      //             },\n      //           });\n      //         },\n      //       );\n      //       utils.fetchWithListQuery(\n      //         mutedParticipantListQuery,\n      //         logger,\n      //         (users) => {\n      //           messagesDispatcher({\n      //             type: messageActionTypes.FETCH_MUTED_USER_LIST,\n      //             payload: {\n      //               channel: openChannel,\n      //               users,\n      //             },\n      //           });\n      //         },\n      //       );\n      //     }\n      //   });\n      // })\n      // .catch((error) => {\n      //   logger.warning('OpenChannel | useSetChannel fetching channel failed', { channelUrl, error });\n      //   messagesDispatcher({\n      //     type: messageActionTypes.SET_CHANNEL_INVALID,\n      //   });\n      // });\n    }\n  }, [channelUrl, sdkInit, fetchingParticipants]);\n}\n\nexport default useSetChannel;\n","import { useEffect } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport uuidv4 from '../../../utils/uuid';\nimport { scrollIntoLast } from '../utils';\n\ninterface MainProps {\n  currentOpenChannel: SendbirdUIKit.OpenChannelType;\n  checkScrollBottom: () => boolean;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messagesDispatcher: ({ type: string, payload: any }) => void;\n}\n\nfunction useHandleChannelEvents(\n  { currentOpenChannel, checkScrollBottom }: MainProps,\n  { sdk, logger, messagesDispatcher }: ToolProps,\n): void {\n  useEffect(() => {\n    const messageReceiverId = uuidv4();\n    if (currentOpenChannel && currentOpenChannel.url && sdk && sdk.ChannelHandler) {\n      const ChannelHandler = new sdk.ChannelHandler();\n      logger.info('OpenChannel | useHandleChannelEvents: Setup evnet handler', messageReceiverId);\n\n      ChannelHandler.onMessageReceived = (channel, message) => {\n        const scrollToEnd = checkScrollBottom();\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMessageReceived', { channelUrl, message });\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_RECEIVED,\n          payload: { channel, message },\n        });\n        if (scrollToEnd) {\n          try {\n            setTimeout(() => {\n              scrollIntoLast();\n            });\n          } catch (error) {\n            logger.warning('OpenChannel | onMessageReceived | scroll to end failed');\n          }\n        }\n      };\n      ChannelHandler.onMessageUpdated = (channel, message) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMessageUpdated', { channelUrl, message });\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_UPDATED,\n          payload: { channel, message },\n        });\n      };\n      ChannelHandler.onMessageDeleted = (channel, messageId) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMessageDeleted', { channelUrl, messageId });\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_DELETED,\n          payload: { channel, messageId },\n        });\n      };\n      ChannelHandler.onOperatorUpdated = (channel, operators) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onOperatorUpdated', { channelUrl, operators });\n        messagesDispatcher({\n          type: messageActionTypes.ON_OPERATOR_UPDATED,\n          payload: { channel, operators },\n        });\n      };\n      ChannelHandler.onUserEntered = (channel, user) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onUserEntered', { channelUrl, user });\n        messagesDispatcher({\n          type: messageActionTypes.ON_USER_ENTERED,\n          payload: { channel, user },\n        });\n      };\n      ChannelHandler.onUserExited = (channel, user) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onUserExited', { channelUrl, user });\n        messagesDispatcher({\n          type: messageActionTypes.ON_USER_EXITED,\n          payload: { channel, user },\n        });\n      };\n      ChannelHandler.onUserMuted = (channel, user) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onUserMuted', { channelUrl, user });\n        messagesDispatcher({\n          type: messageActionTypes.ON_USER_MUTED,\n          payload: { channel, user },\n        });\n      };\n      ChannelHandler.onUserUnmuted = (channel, user) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onUserUnmuted', { channelUrl, user });\n        messagesDispatcher({\n          type: messageActionTypes.ON_USER_UNMUTED,\n          payload: { channel, user },\n        });\n      };\n      ChannelHandler.onUserBanned = (channel, user) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onUserBanned', { channelUrl, user });\n        messagesDispatcher({\n          type: messageActionTypes.ON_USER_BANNED,\n          payload: { channel, user },\n        });\n      };\n      ChannelHandler.onUserUnbanned = (channel, user) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onUserUnbanned', { channelUrl, user });\n        messagesDispatcher({\n          type: messageActionTypes.ON_USER_UNBANNED,\n          payload: { channel, user },\n        });\n      };\n      ChannelHandler.onChannelFrozen = (channel) => {\n        logger.info('OpenChannel | useHandleChannelEvents: onChannelFrozen', channel);\n        messagesDispatcher({\n          type: messageActionTypes.ON_CHANNEL_FROZEN,\n          payload: channel,\n        });\n      };\n      ChannelHandler.onChannelUnfrozen = (channel) => {\n        logger.info('OpenChannel | useHandleChannelEvents: onChannelUnfrozen', channel);\n        messagesDispatcher({\n          type: messageActionTypes.ON_CHANNEL_UNFROZEN,\n          payload: channel,\n        });\n      };\n      ChannelHandler.onChannelChanged = (channel) => {\n        logger.info('OpenChannel | useHandleChannelEvents: onChannelChanged', channel);\n        messagesDispatcher({\n          type: messageActionTypes.ON_CHANNEL_CHANGED,\n          payload: channel,\n        });\n      };\n      ChannelHandler.onMetaDataCreated = (channel, metaData) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMetaDataCreated', { channelUrl, metaData });\n        messagesDispatcher({\n          type: messageActionTypes.ON_META_DATA_CREATED,\n          payload: { channel, metaData },\n        });\n      };\n      ChannelHandler.onMetaDataUpdated = (channel, metaData) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMetaDataUpdated', { channelUrl, metaData });\n        messagesDispatcher({\n          type: messageActionTypes.ON_META_DATA_UPDATED,\n          payload: { channel, metaData },\n        });\n      };\n      ChannelHandler.onMetaDataDeleted = (channel, metaDataKeys) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMetaDataDeleted', { channelUrl, metaDataKeys });\n        messagesDispatcher({\n          type: messageActionTypes.ON_META_DATA_DELETED,\n          payload: { channel, metaDataKeys },\n        });\n      };\n      ChannelHandler.onMetaCountersCreated = (channel, metaCounter) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersCreated', { channelUrl, metaCounter });\n        messagesDispatcher({\n          type: messageActionTypes.ON_META_COUNTERS_CREATED,\n          payload: { channel, metaCounter },\n        });\n      };\n      ChannelHandler.onMetaCountersUpdated = (channel, metaCounter) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersUpdated', { channelUrl, metaCounter });\n        messagesDispatcher({\n          type: messageActionTypes.ON_META_COUNTERS_UPDATED,\n          payload: { channel, metaCounter },\n        });\n      };\n      ChannelHandler.onMetaCountersDeleted = (channel, metaCounterKeys) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersDeleted', { channelUrl, metaCounterKeys });\n        messagesDispatcher({\n          type: messageActionTypes.ON_META_COUNTERS_DELETED,\n          payload: { channel, metaCounterKeys },\n        });\n      };\n      ChannelHandler.onMentionReceived = (channel, message) => {\n        const channelUrl = channel.url;\n        logger.info('OpenChannel | useHandleChannelEvents: onMentionReceived', { channelUrl, message });\n        messagesDispatcher({\n          type: messageActionTypes.ON_MENTION_RECEIVED,\n          payload: { channel, message },\n        });\n      };\n\n      sdk.addChannelHandler(messageReceiverId, ChannelHandler);\n    }\n\n    return () => {\n      if (sdk && sdk.removeChannelHandler) {\n        logger.info('OpenChannel | useHandleChannelEvents: Removing message receiver handler', messageReceiverId);\n        sdk.removeChannelHandler(messageReceiverId);\n      }\n    }\n  }, [currentOpenChannel]);\n}\n\nexport default useHandleChannelEvents;\n","import { useEffect } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport { scrollIntoLast } from '../utils';\n\ninterface MainProps {\n  currentOpenChannel: SendbirdUIKit.OpenChannelType;\n  /* eslint-disable @typescript-eslint/no-explicit-any*/\n  userFilledMessageListParams?: Record<string, any>;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messagesDispatcher: ({ type: string, payload: any }) => void;\n}\n\nfunction useInitialMessagesFetch(\n  { currentOpenChannel, userFilledMessageListParams }: MainProps,\n  { sdk, logger, messagesDispatcher }: ToolProps,\n): void {\n  useEffect(() => {\n    logger.info('OpenChannel | useInitialMessagesFetch: Setup started', currentOpenChannel);\n    messagesDispatcher({\n      type: messageActionTypes.RESET_MESSAGES,\n      payload: null,\n    });\n\n    if (sdk && sdk.MessageListParams && currentOpenChannel && currentOpenChannel.getMessagesByTimestamp) {\n      const messageListParams = new sdk.MessageListParams();\n      messageListParams.prevResultSize = 30;\n      messageListParams.isInclusive = true;\n      messageListParams.includeReplies = false;\n      messageListParams.includeReactions = false;\n      if (userFilledMessageListParams) {\n        Object.keys(userFilledMessageListParams).forEach((key) => {\n          messageListParams[key] = userFilledMessageListParams[key];\n        });\n        logger.info('OpenChannel | useInitialMessagesFetch: Used customizedMessageListParams');\n      }\n\n      logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages', { currentOpenChannel, messageListParams });\n      messagesDispatcher({\n        type: messageActionTypes.GET_PREV_MESSAGES_START,\n        payload: null,\n      });\n      currentOpenChannel.getMessagesByTimestamp(new Date().getTime(), messageListParams, (messages, error) => {\n        if (!error) {\n          logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages succeeded', messages);\n          const hasMore = (messages && messages.length > 0);\n          const lastMessageTimestamp = hasMore ? messages[0].createdAt : null;\n          messagesDispatcher({\n            type: messageActionTypes.GET_PREV_MESSAGES_SUCESS,\n            payload: {\n              currentOpenChannel,\n              messages,\n              hasMore,\n              lastMessageTimestamp,\n            },\n          });\n          setTimeout(() => { scrollIntoLast(); });\n        } else {\n          logger.error('OpenChannel | useInitialMessagesFetch: Fetching messages failed', error);\n          messagesDispatcher({\n            type: messageActionTypes.GET_PREV_MESSAGES_FAIL,\n            payload: {\n              currentOpenChannel,\n              messages: [],\n              hasMore: false,\n              lastMessageTimestamp: 0,\n            },\n          });\n        }\n      });\n    }\n  }, [currentOpenChannel, userFilledMessageListParams]);\n}\n\nexport default useInitialMessagesFetch;\n","import { useCallback } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface MainProps {\n  currentOpenChannel: SendbirdUIKit.OpenChannelType;\n  lastMessageTimestamp: number;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messagesDispatcher: ({ type: string, payload: any }) => void;\n  hasMore: boolean;\n  /* eslint-disable @typescript-eslint/no-explicit-any*/\n  userFilledMessageListParams?: Record<string, any>;\n}\ntype CallbackReturn = (callback: () => void) => void;\n\nfunction useScrollCallback(\n  { currentOpenChannel, lastMessageTimestamp }: MainProps,\n  { sdk, logger, messagesDispatcher, hasMore, userFilledMessageListParams }: ToolProps,\n): CallbackReturn {\n  return useCallback((callback) => {\n    if (hasMore && sdk && sdk.MessageListParams) {\n      logger.info('OpenChannel | useScrollCallback: start');\n      const messageListParams = new sdk.MessageListParams();\n      messageListParams.prevResultSize = 30;\n      messageListParams.includeReplies = false;\n      messageListParams.includeReactions = false;\n\n      if (userFilledMessageListParams) {\n        Object.keys(userFilledMessageListParams).forEach((key) => {\n          messageListParams[key] = userFilledMessageListParams[key];\n        });\n        logger.info('OpenChannel | useScrollCallback: Used userFilledMessageListParams', userFilledMessageListParams);\n      }\n\n      logger.info('OpenChannel | useScrollCallback: Fetching messages', { currentOpenChannel, messageListParams });\n\n      currentOpenChannel.getMessagesByTimestamp(lastMessageTimestamp || new Date().getTime(), messageListParams, (messages, error) => {\n        if (!error) {\n          logger.info('OpenChannel | useScrollCallback: Fetching messages succeeded', messages);\n          const hasMore = (messages && messages.length > 0);\n          const lastMessageTimestamp = hasMore ? messages[0].createdAt : null;\n          messagesDispatcher({\n            type: messageActionTypes.GET_PREV_MESSAGES_SUCESS,\n            payload: {\n              currentOpenChannel,\n              messages,\n              hasMore,\n              lastMessageTimestamp,\n            }\n          });\n          setTimeout(() => {\n            callback();\n          });\n        } else {\n          logger.error('OpenChannel | useScrollCallback: Fetching messages failed', error);\n          messagesDispatcher({\n            type: messageActionTypes.GET_PREV_MESSAGES_FAIL,\n            payload: {\n              currentOpenChannel,\n              messages: [],\n              hasMore: false,\n              lastMessageTimestamp: 0,\n            }\n          });\n        }\n      });\n    }\n  }, [currentOpenChannel, lastMessageTimestamp]);\n}\n\nexport default useScrollCallback;\n","import { useCallback } from 'react';\n\ninterface MainProps {\n  conversationScrollRef: React.RefObject<HTMLDivElement>;\n}\ninterface ToolProps {\n  logger: SendbirdUIKit.Logger;\n}\n\nfunction useCheckScrollBottom(\n  { conversationScrollRef }: MainProps,\n  { logger }: ToolProps,\n): () => boolean {\n  return useCallback(() => {\n    let isBottom = true;\n    if (conversationScrollRef) {\n      try {\n        const conversationScroll = conversationScrollRef.current;\n        isBottom = conversationScroll.scrollHeight <= conversationScroll.scrollTop + conversationScroll.clientHeight;\n      } catch(error) {\n        logger.error('OpenChannel | useCheckScrollBottom', error);\n      }\n    }\n    return isBottom;\n  }, [conversationScrollRef])\n}\n\nexport default useCheckScrollBottom;\n","import Sendbird from 'sendbird';\nimport { useCallback } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport * as utils from '../utils';\n\ninterface MainProps {\n  currentOpenChannel: SendbirdUIKit.OpenChannelType;\n  onBeforeSendUserMessage: (text: string) => Sendbird.UserMessageParams;\n  checkScrollBottom: () => boolean;\n  messageInputRef: React.RefObject<HTMLInputElement>;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messagesDispatcher: ({ type: string, payload: any }) => void;\n}\n\nfunction useSendMessageCallback(\n  { currentOpenChannel, onBeforeSendUserMessage, checkScrollBottom, messageInputRef }: MainProps,\n  { sdk, logger, messagesDispatcher }: ToolProps,\n): () => void {\n  return useCallback(() => {\n    if (sdk && sdk.UserMessageParams) {\n      const text = messageInputRef.current.value;\n      const createParamsDefault = (txt: string | number): Sendbird.UserMessageParams => {\n        const message = typeof txt === 'string' ? txt.trim() : txt.toString(10).trim();\n        const params = new sdk.UserMessageParams();\n        params.message = message;\n        return params;\n      }\n      const createCustomParams = onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function';\n      if (createCustomParams) {\n        logger.info('OpenChannel | useSendMessageCallback: Creating params using onBeforeSendUserMessage', onBeforeSendUserMessage);\n      }\n      const params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text) : createParamsDefault(text);\n      logger.info('OpenChannel | useSendMessageCallback: Sending message has started', params);\n\n      const isBottom = checkScrollBottom();\n      const pendingMessage = currentOpenChannel.sendUserMessage(params, (message, error) => {\n        if (!error) {\n          logger.info('OpenChannel | useSendMessageCallback: Sending message succeeded', message);\n          messagesDispatcher({\n            type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n            payload: message,\n          });\n          if (isBottom) {\n            setTimeout(() => {\n              utils.scrollIntoLast();\n            });\n          }\n        } else {\n          logger.warning('OpenChannel | useSendMessageCallback: Sending message failed', error);\n          messagesDispatcher({\n            type: messageActionTypes.SENDING_MESSAGE_FAILED,\n            payload: messageActionTypes,\n          });\n        }\n      });\n      messagesDispatcher({\n        type: messageActionTypes.SENDING_MESSAGE_START,\n        payload: {\n          message: pendingMessage,\n          channel: currentOpenChannel,\n        }\n      });\n    }\n  }, [currentOpenChannel, onBeforeSendUserMessage, checkScrollBottom, messageInputRef]);\n}\n\nexport default useSendMessageCallback;\n","import Sendbird from 'sendbird';\nimport { useCallback } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport * as utils from '../utils';\n\ninterface MainProps {\n  currentOpenChannel: SendbirdUIKit.OpenChannelType;\n  onBeforeSendFileMessage: (file: File) => Sendbird.FileMessageParams;\n  checkScrollBottom: () => boolean;\n  imageCompression?: {\n    compressionRate?: number,\n    resizingWidth?: number | string,\n    resizingHeight?: number | string,\n  };\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messagesDispatcher: ({ type: string, payload: any }) => void;\n}\n\ntype CallbackReturn = (file: File) => void;\n\nfunction useFileUploadCallback(\n  {\n    currentOpenChannel,\n    checkScrollBottom,\n    imageCompression = {},\n    onBeforeSendFileMessage,\n  }: MainProps,\n  { sdk, logger, messagesDispatcher }: ToolProps,\n): CallbackReturn {\n  return useCallback((file) => {\n    if (sdk && sdk.FileMessageParams) {\n      const {\n        compressionRate,\n        resizingWidth,\n        resizingHeight,\n      } = imageCompression;\n      const createCustomParams = onBeforeSendFileMessage && typeof onBeforeSendFileMessage === 'function';\n\n      const compressibleFileType = (file.type === 'image/jpg' || file.type === 'image/png' || file.type === 'image/jpeg');\n      const compressibleRatio = (compressionRate > 0) && (compressionRate < 1);\n      // pxToNumber returns null if values are invalid\n      const compressibleDiamensions = utils.pxToNumber(resizingWidth)\n        || utils.pxToNumber(resizingHeight);\n\n      const canCompressImage = compressibleFileType && (compressibleRatio || compressibleDiamensions);\n\n      const createParamsDefault = (file_): Sendbird.FileMessageParams => {\n        const params = new sdk.FileMessageParams();\n        params.file = file_;\n        return params;\n      };\n\n      if (canCompressImage) { // Using image compression\n        try {\n          const image: HTMLImageElement = document.createElement('img');\n          image.src = URL.createObjectURL(file);\n          image.onload = () => {\n            URL.revokeObjectURL(image.src);\n            const canvas = document.createElement('canvas');\n            const imageWidth = image.naturalWidth || image.width;\n            const imageHeight = image.naturalHeight || image.height;\n            let targetWidth = utils.pxToNumber(resizingWidth) || imageWidth;\n            let targetHeight = utils.pxToNumber(resizingHeight) || imageHeight;\n\n            // In canvas.toBlob(callback, mimeType, qualityArgument)\n            // qualityArgument doesnt work\n            // so in case compressibleDiamensions are not present, we use ratio\n            if (file.type === 'image/png' && !compressibleDiamensions) {\n              targetWidth *= compressionRate;\n              targetHeight *= compressionRate;\n            }\n\n            canvas.width = targetWidth;\n            canvas.height = targetHeight;\n            const context = canvas.getContext('2d');\n            context.drawImage(image, 0, 0, targetWidth, targetHeight);\n            context.canvas.toBlob(\n              (newImageBlob) => {\n                const compressedFile = new File([newImageBlob], file.name, { type: file.type });\n                if (createCustomParams) {\n                  logger.info('OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);\n                }\n                const params = onBeforeSendFileMessage ? onBeforeSendFileMessage(compressedFile) : createParamsDefault(compressedFile);\n                logger.info('OpenChannel | useFileUploadCallback: Uploading file message start', params);\n\n                const isBottom = checkScrollBottom();\n                const pendingMessage = currentOpenChannel.sendFileMessage(\n                  params,\n                  (message: SendbirdUIKit.ClientFileMessage, error) => {\n                    if (!error) {\n                      logger.info('OpenChannel | useFileUploadCallback: Sending message succeeded', message);\n                      messagesDispatcher({\n                        type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n                        payload: message,\n                      });\n                      if (isBottom) {\n                        setTimeout(() => {\n                          utils.scrollIntoLast();\n                        });\n                      }\n                    } else {\n                      logger.error('OpenChannel | useFileUploadCallback: Sending file message failed', { message, error });\n                      message.localUrl = URL.createObjectURL(file);\n                      message.file = file;\n                      messagesDispatcher({\n                        type: messageActionTypes.SENDING_MESSAGE_FAILED,\n                        payload: message,\n                      });\n                    }\n                  },\n                );\n\n                messagesDispatcher({\n                  type: messageActionTypes.SENDING_MESSAGE_START,\n                  payload: {\n                    message: {\n                      ...pendingMessage,\n                      url: URL.createObjectURL(file),\n                      // pending thumbnail message seems to be failed\n                      requestState: 'pending',\n                    },\n                    channel: currentOpenChannel,\n                  }\n                });\n              },\n              file.type,\n              compressionRate,\n            );\n          }\n        } catch (error) {\n          logger.warning('OpenChannel | useFileUploadCallback: Sending file message with image compression failed', error);\n        }\n      } else { // Not using image compression\n        if (createCustomParams) {\n          logger.info('OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);\n        }\n        const params = onBeforeSendFileMessage ? onBeforeSendFileMessage(file) : createParamsDefault(file);\n        logger.info('OpenChannel | useFileUploadCallback: Uploading file message start', params);\n\n        const isBottom = checkScrollBottom();\n        const pendingMessage = currentOpenChannel.sendFileMessage(\n          params,\n          (message: SendbirdUIKit.ClientFileMessage, error) => {\n            if (!error) {\n              logger.info('OpenChannel | useFileUploadCallback: Sending message succeeded', message);\n              messagesDispatcher({\n                type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n                payload: message,\n              });\n              if (isBottom) {\n                setTimeout(() => {\n                  utils.scrollIntoLast();\n                });\n              }\n            } else {\n              logger.error('OpenChannel | useFileUploadCallback: Sending file message failed', { message, error });\n              message.localUrl = URL.createObjectURL(file);\n              message.file = file;\n              messagesDispatcher({\n                type: messageActionTypes.SENDING_MESSAGE_FAILED,\n                payload: message,\n              });\n            }\n          }\n        );\n\n        messagesDispatcher({\n          type: messageActionTypes.SENDING_MESSAGE_START,\n          payload: {\n            message: {\n              ...pendingMessage,\n              url: URL.createObjectURL(file),\n              // pending thumbnail message seems to be failed\n              requestState: 'pending',\n            },\n            channel: currentOpenChannel,\n          }\n        });\n      }\n    }\n  }, [currentOpenChannel, onBeforeSendFileMessage, checkScrollBottom, imageCompression]);\n}\n\nexport default useFileUploadCallback;\n","import Sendbird from 'sendbird';\nimport { useCallback } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface MainProps {\n  currentOpenChannel: SendbirdUIKit.OpenChannelType;\n  onBeforeSendUserMessage?: (text) => Sendbird.UserMessageParams;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messagesDispatcher: ({ type: string, payload :any }) => void;\n}\ntype CallbackReturn = (messageId, text, callback) => void;\n\nfunction useUpdateMessageCallback(\n  { currentOpenChannel, onBeforeSendUserMessage }: MainProps,\n  { sdk, logger, messagesDispatcher }: ToolProps,\n): CallbackReturn {\n  return useCallback((messageId, text, callback) => {\n    const createParamsDefault = (txt) => {\n      const params = new sdk.UserMessageParams();\n      params.message = txt;\n      return params;\n    };\n\n    if (onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function') {\n      logger.info('OpenChannel | useUpdateMessageCallback: Creating params using onBeforeUpdateUserMessage');\n    }\n    const params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text) : createParamsDefault(text);\n    currentOpenChannel.updateUserMessage(messageId, params, (message, error) => {\n      if (callback) {\n        callback();\n      }\n      if (!error) {\n        logger.info('OpenChannel | useUpdateMessageCallback: Updating message succeeded', { message, params });\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_UPDATED,\n          payload: {\n            channel: currentOpenChannel,\n            message,\n          },\n        });\n      } else {\n        logger.warning('OpenChannel | useUpdateMessageCallback: Updating message failed', error);\n      }\n    });\n  }, [currentOpenChannel, onBeforeSendUserMessage]);\n}\n\nexport default useUpdateMessageCallback;\n","import { useCallback } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface MainProps {\n  currentOpenChannel: SendbirdUIKit.OpenChannelType;\n}\ninterface ToolProps {\n  logger: SendbirdUIKit.Logger;\n  messagesDispatcher: ({ type: string, payload: any }) => void;\n}\n\ntype CallbackReturn = (\n  message: SendbirdUIKit.ClientUserMessage | SendbirdUIKit.ClientFileMessage,\n  callback?: () => void,\n) => void;\n\nfunction useDeleteMessageCallback(\n  { currentOpenChannel }: MainProps,\n  { logger, messagesDispatcher }: ToolProps,\n): CallbackReturn {\n  return useCallback((message, callback) => {\n    logger.info('OpenChannel | useDeleteMessageCallback: Deleting message', message);\n    const { sendingStatus } = message;\n    logger.info('OpenChannel | useDeleteMessageCallback: Deleting message requestState', sendingStatus);\n\n    if (sendingStatus === 'failed' || sendingStatus === 'pending') {\n      logger.info('OpenChannel | useDeleteMessageCallback: Deleted message from local', message);\n      messagesDispatcher({\n        type: messageActionTypes.ON_MESSAGE_DELETED_BY_REQ_ID,\n        payload: message.reqId,\n      });\n      if (callback) {\n        callback();\n      }\n    } else {\n      currentOpenChannel.deleteMessage(message, (error) => {\n        logger.info('OpenChannel | useDeleteMessageCallback: Deleting message on server', sendingStatus);\n        if (callback) {\n          callback();\n        }\n        if (!error) {\n          logger.info('OpenChannel | useDeleteMessageCallback: Deleting message succeeded', message);\n          messagesDispatcher({\n            type: messageActionTypes.ON_MESSAGE_DELETED,\n            payload: {\n              channel: currentOpenChannel,\n              messageId: message.messageId,\n            },\n          });\n        } else {\n          logger.warning('OpenChannel | useDeleteMessageCallback: Deleting message failed', error);\n        }\n      });\n    }\n  }, [currentOpenChannel]);\n}\n\nexport default useDeleteMessageCallback;\n","import { useCallback } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface MainProps {\n  currentOpenChannel: SendbirdUIKit.OpenChannelType;\n}\ninterface ToolProps {\n  logger: SendbirdUIKit.Logger;\n  messagesDispatcher: ({ type: string, payload: any }) => void;\n}\ntype CallbackReturn = (failedMessage: SendbirdUIKit.ClientUserMessage | SendbirdUIKit.ClientFileMessage) => void;\n\nfunction useResendMessageCallback(\n  { currentOpenChannel }: MainProps,\n  { logger, messagesDispatcher }: ToolProps,\n): CallbackReturn {\n  return useCallback((failedMessage) => {\n    logger.info('OpenChannel | useResendMessageCallback: Resending message has started', failedMessage);\n    const { messageType, file } = failedMessage;\n    if (failedMessage && typeof failedMessage.isResendable === 'function' && failedMessage.isResendable()) {\n      // eslint-disable-next-line no-param-reassign\n      failedMessage.requestState = 'pending';\n      messagesDispatcher({\n        type: messageActionTypes.RESENDING_MESSAGE_START,\n        payload: {\n          channel: currentOpenChannel,\n          message: failedMessage,\n        },\n      });\n\n      // userMessage\n      if (messageType === 'user' && failedMessage.messageType === 'user') {\n        currentOpenChannel.resendUserMessage(failedMessage, (message, error) => {\n          if (!error) {\n            logger.info('OpenChannel | useResendMessageCallback: Reseding message succeeded', message);\n            messagesDispatcher({\n              type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n              payload: message,\n            });\n          } else {\n            logger.warning('OpenChannel | useResendMessageCallback: Resending message failed', error);\n            // eslint-disable-next-line no-param-reassign\n            failedMessage.requestState = 'failed';\n            messagesDispatcher({\n              type: messageActionTypes.SENDING_MESSAGE_FAILED,\n              payload: failedMessage,\n            });\n          }\n        });\n        return;\n      }\n\n      // fileMessage\n      if (messageType === 'file' && failedMessage.messageType === 'file') {\n        currentOpenChannel.resendFileMessage(failedMessage, file, (message, error) => {\n          if (!error) {\n            logger.info('OpenChannel | useResendMessageCallback: Resending file message succeeded', message);\n            messagesDispatcher({\n              type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n              payload: message,\n            });\n          } else {\n            logger.warning('OpenChannel | useResendMessageCallback: Resending file message failed', error);\n            // eslint-disable-next-line no-param-reassign\n            failedMessage.requestState = 'failed';\n            messagesDispatcher({\n              type: messageActionTypes.SENDING_MESSAGE_FAILED,\n              payload: failedMessage,\n            });\n          }\n        });\n      }\n    } else {\n      // to alert user on console\n      // eslint-disable-next-line no-console\n      console.error('OpenChannel | useResendMessageCallback: Message is not resendable');\n      logger.warning('OpenChannel | useResendMessageCallback: Message is not resendable', failedMessage);\n    }\n  }, [currentOpenChannel]);\n}\n\nexport default useResendMessageCallback;\n","import React, {\n  useRef,\n  useEffect,\n  useReducer,\n  useContext,\n  useMemo,\n} from 'react';\nimport * as utils from './utils';\nimport './index.scss';\n\nimport MessageInputWrapper from './components/MessageInpuetWrapper';\nimport FrozenChannelNotification from './components/FrozenNotification';\nimport OpenchannelConversationHeader from '../../ui/OpenchannelConversationHeader';\nimport OpenchannelConversationScroll from './components/OpenchannelConversationScroll';\nimport PlaceHolder, { PlaceHolderTypes } from '../../ui/PlaceHolder';\nimport { UserProfileProvider } from '../../lib/UserProfileContext';\n\nimport { OpenChannelProps } from '../../index';\nimport messagesReducer from './dux/reducers';\nimport messagesInitialState from './dux/initialState';\nimport * as messageActionTypes from './dux/actionTypes';\nimport withSendbirdContext from '../../lib/SendbirdSdkContext.jsx';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { scrollIntoLast } from './utils';\nimport * as topics from '../../lib/pubSub/topics';\n\n// hooks\nimport useSetChannel from './hooks/useSetChannel';\nimport useHandleChannelEvents from './hooks/useHandleChannelEvents';\nimport useInitialMessagesFetch from './hooks/useInitialMessagesFetch';\nimport useScrollCallback from './hooks/useScrollCallback';\nimport useCheckScrollBottom from './hooks/useCheckScrollBottom';\nimport useSendMessageCallback from './hooks/useSendMessageCallback';\nimport useFileUploadCallback from './hooks/useFileUploadCallback';\nimport useUpdateMessageCallback from './hooks/useUpdateMessageCallback';\nimport useDeleteMessageCallback from './hooks/useDeleteMessageCallback';\nimport useResendMessageCallback from './hooks/useResendMessageCallback';\n\nconst COMPONENT_CLASS_NAME = 'sendbird-openchannel-conversation';\n\ninterface Props extends OpenChannelProps {\n  stores: {\n    sdkStore?: SendbirdUIKit.SdkStore,\n    userStore?: SendbirdUIKit.UserStore,\n  };\n  config: {\n    userId: string,\n    isOnline: boolean,\n    logger?: SendbirdUIKit.Logger,\n    theme?: string,\n    /* eslint-disable @typescript-eslint/no-explicit-any*/\n    pubSub: any,\n    disableUserProfile?: boolean,\n    renderUserProfile?(): JSX.Element,\n    imageCompression?: {\n      compressionRate?: number,\n      resizingWidth?: number | string,\n      resizingHeight?: number | string,\n    },\n  };\n}\n\nexport const OpenchannelConversation = (props: Props): JSX.Element => {\n  // props\n  const {\n    useMessageGrouping,\n    channelUrl,\n    stores,\n    config,\n    queries = {},\n    disableUserProfile,\n    fetchingParticipants = false, // We didn't decide to support fetching participant list\n    renderCustomMessage,\n    renderUserProfile,\n    renderChannelTitle,\n    renderMessageInput,\n    onBeforeSendUserMessage,\n    onBeforeSendFileMessage,\n    onChatHeaderActionClick\n  } = props;\n\n  const {\n    sdkStore,\n    userStore,\n  } = stores;\n  const {\n    userId,\n    isOnline,\n    logger,\n    pubSub,\n    imageCompression,\n  } = config;\n\n  const {\n    sdk\n  } = sdkStore;\n  const {\n    user\n  } = userStore;\n\n  // hook variables\n  const [messagesStore, messagesDispatcher] = useReducer(messagesReducer, messagesInitialState);\n  const {\n    allMessages,\n    loading,\n    initialized,\n    currentOpenChannel,\n    isInvalid,\n    hasMore,\n    lastMessageTimestamp,\n    operators,\n    bannedParticipantIds,\n    mutedParticipantIds,\n  } = messagesStore;\n  // ref\n  const messageInputRef = useRef(null); // useSendMessageCallback\n  const conversationScrollRef = useRef(null); // useScrollAfterSendMessageCallback\n  const { stringSet } = useContext(LocalizationContext);\n\n  // const\n  const sdkInit = sdkStore.initialized;\n  const userFilledMessageListParams = queries ? queries.messageListParams: null;\n  const disabled = !initialized\n    || !isOnline\n    || utils.isDisabledBecauseFrozen(currentOpenChannel, userId);\n  // || utils.isDisabledBecauseMuted(mutedParticipantIds, userId)\n  const userDefinedDisableUserProfile = disableUserProfile || config.disableUserProfile;\n  const userDefinedRenderProfile = renderUserProfile || config.renderUserProfile;\n\n  // useMemo\n  const amIBanned = useMemo(() => {\n    return bannedParticipantIds.indexOf(user.userId) >= 0;\n  }, [channelUrl, bannedParticipantIds, user]);\n  const amIMuted = useMemo(() => {\n    return mutedParticipantIds.indexOf(user.userId) >= 0;\n  }, [channelUrl, mutedParticipantIds, user]);\n  const amIOperator = useMemo(() => {\n    return operators.map(operator => operator.userId).indexOf(user.userId) >= 0;\n  }, [channelUrl, operators, user]);\n\n  // use hooks\n  useSetChannel(\n    { channelUrl, sdkInit, fetchingParticipants },\n    { sdk, logger, messagesDispatcher },\n  );\n  const checkScrollBottom = useCheckScrollBottom(\n    { conversationScrollRef },\n    { logger },\n  );\n  useHandleChannelEvents(\n    { currentOpenChannel, checkScrollBottom },\n    { sdk, logger, messagesDispatcher },\n  );\n  useInitialMessagesFetch(\n    { currentOpenChannel, userFilledMessageListParams },\n    { sdk, logger, messagesDispatcher },\n  );\n  const onScroll = useScrollCallback(\n    { currentOpenChannel, lastMessageTimestamp },\n    { sdk, logger, messagesDispatcher, hasMore, userFilledMessageListParams },\n  );\n  const handleSendMessage = useSendMessageCallback(\n    { currentOpenChannel, onBeforeSendUserMessage, checkScrollBottom, messageInputRef },\n    { sdk, logger, messagesDispatcher },\n  );\n  const handleFileUpload = useFileUploadCallback(\n    { currentOpenChannel, onBeforeSendFileMessage, checkScrollBottom, imageCompression },\n    { sdk, logger, messagesDispatcher },\n  );\n  const updateMessage = useUpdateMessageCallback(\n    { currentOpenChannel, onBeforeSendUserMessage },\n    { sdk, logger, messagesDispatcher },\n  );\n  const deleteMessage = useDeleteMessageCallback(\n    { currentOpenChannel },\n    { logger, messagesDispatcher },\n  );\n  const resendMessage = useResendMessageCallback(\n    { currentOpenChannel },\n    { logger, messagesDispatcher },\n  );\n\n  // handle API calls from withSendbird\n  useEffect(() => {\n    const subscriber = new Map();\n    if (!pubSub || !pubSub.subscribe) {\n      return;\n    }\n    subscriber.set(topics.SEND_USER_MESSAGE, pubSub.subscribe(topics.SEND_USER_MESSAGE, (msg) => {\n      const { channel, message } = msg;\n      scrollIntoLast();\n      if (channel && (channelUrl === channel.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n          payload: message,\n        });\n      }\n    }));\n    subscriber.set(topics.SEND_MESSAGE_START, pubSub.subscribe(topics.SEND_MESSAGE_START, (msg) => {\n      const { channel, message } = msg;\n      if (channel && (channelUrl === channel.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.SENDING_MESSAGE_START,\n          payload: message,\n        });\n      }\n    }));\n    subscriber.set(topics.SEND_FILE_MESSAGE, pubSub.subscribe(topics.SEND_FILE_MESSAGE, (msg) => {\n      const { channel, message } = msg;\n      scrollIntoLast();\n      if (channel && (channelUrl === channel.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n          payload: message,\n        });\n      }\n    }));\n    subscriber.set(topics.UPDATE_USER_MESSAGE, pubSub.subscribe(topics.UPDATE_USER_MESSAGE, (msg) => {\n      const { channel, message, fromSelector } = msg;\n      if (fromSelector && channel && (channelUrl === channel.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_UPDATED,\n          payload: { channel, message },\n        });\n      }\n    }));\n    subscriber.set(topics.DELETE_MESSAGE, pubSub.subscribe(topics.DELETE_MESSAGE, (msg) => {\n      const { channel, messageId } = msg;\n      if (channel && (channelUrl === channel.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_DELETED,\n          payload: messageId,\n        });\n      }\n    }));\n\n    return () => {\n      if (subscriber) {\n        subscriber.forEach((s) => {\n          try {\n            s.remove();\n          } catch {\n            //\n          }\n        });\n      }\n    };\n  }, [channelUrl, sdkInit]);\n\n  if (\n    !currentOpenChannel\n    || !currentOpenChannel.url\n    || amIBanned\n  ) {\n    return (<div className={COMPONENT_CLASS_NAME}><PlaceHolder type={PlaceHolderTypes.NO_CHANNELS} /></div>);\n  }\n  if (loading) {\n    return (<div className={COMPONENT_CLASS_NAME}><PlaceHolder type={PlaceHolderTypes.LOADING} /></div>);\n  }\n  if (isInvalid) {\n    return (<div className={COMPONENT_CLASS_NAME}><PlaceHolder type={PlaceHolderTypes.WRONG} /></div>);\n  }\n\n  return (\n    <UserProfileProvider\n      className={COMPONENT_CLASS_NAME}\n      disableUserProfile={userDefinedDisableUserProfile}\n      renderUserProfile={userDefinedRenderProfile}\n    >\n      {\n        renderChannelTitle\n          ? renderChannelTitle({\n            channel: currentOpenChannel,\n            user: user,\n          })\n          : (\n            <OpenchannelConversationHeader\n              title={currentOpenChannel.name}\n              subTitle={`${utils.kFormatter(currentOpenChannel.participantCount)} ${stringSet.OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS}`}\n              coverImage={currentOpenChannel.coverUrl}\n              onActionClick={onChatHeaderActionClick}\n              amIOperator={amIOperator}\n            />\n          )\n      }\n      {\n        currentOpenChannel.isFrozen && (\n          <FrozenChannelNotification />\n        )\n      }\n      <OpenchannelConversationScroll\n        ref={conversationScrollRef}\n        renderCustomMessage={renderCustomMessage}\n        openchannel={currentOpenChannel}\n        user={user}\n        useMessageGrouping={useMessageGrouping}\n        isOnline={isOnline}\n        allMessages={allMessages}\n        onScroll={onScroll}\n        hasMore={hasMore}\n        updateMessage={updateMessage}\n        deleteMessage={deleteMessage}\n        resendMessage={resendMessage}\n      />\n      {\n        renderMessageInput\n          ? (\n            renderMessageInput({\n              channel: currentOpenChannel,\n              user: user,\n              disabled: disabled,\n            })\n          )\n          : (\n            <MessageInputWrapper\n              channel={currentOpenChannel}\n              user={user}\n              ref={messageInputRef}\n              disabled={disabled || amIMuted}\n              onSendMessage={handleSendMessage}\n              onFileUpload={handleFileUpload}\n              renderMessageInput={renderMessageInput}\n            />\n          )\n      }\n    </UserProfileProvider>\n  );\n};\n\nexport default withSendbirdContext(OpenchannelConversation);\n"],"names":["getMessageCreatedAt","message","format","createdAt","scrollIntoLast","intialTry","MAX_TRIES","currentTry","scrollDOM","document","querySelector","scrollTop","scrollHeight","error","setTimeout","isSameGroup","comparingMessage","messageType","sender","userId","sendingStatus","compareMessagesForGrouping","prevMessage","currMessage","nextMessage","kFormatter","num","Math","abs","toFixed","isOperator","openChannel","operators","map","operator","indexOf","isDisabledBecauseFrozen","isFrozen","fetchWithListQuery","listQuery","logger","eachQueryNextCallback","fetchList","query","hasNext","next","users","warning","info","pxToNumber","px","parsed","Number","parseFloat","isNaN","MessageInputWrapper","_a","ref","channel","user","disabled","onSendMessage","onFileUpload","renderMessageInput","stringSet","useContext","LocalizationContext","React","MessageInput","CHANNEL__MESSAGE_INPUT__PLACE_HOLDER__DISABLED","forwardRef","FrozenNotification","Label","LabelTypography","CAPTION_2","CHANNEL_FROZEN","OpenchannelConversationHeader","coverImage","title","subTitle","amIOperator","onActionClick","Avatar","width","height","Icon","IconTypes","CHANNELS","IconColors","CONTENT","H_2","LabelColors","ONBACKGROUND_1","NO_TITLE","BODY_2","ONBACKGROUND_2","IconButton","INFO","MEMBERS","PRIMARY","copyToClipboard","text","window","clipboardData","setData","queryCommandSupported","textarea","createElement","textContent","style","position","body","appendChild","select","execCommand","ex","removeChild","OpenChannelMessageStatusTypes","NONE","PENDING","FAILED","CANCELED","SUCCEEDED","getSenderFromMessage","_sender","checkIsSent","status","checkIsPending","checkIsFailed","checkIsByMe","isFineCopy","length","isFineResend","isResendable","isFineEdit","isFineDelete","showMenuTrigger","props","OpenchannelUserMessage","className","resendMessage","showEdit","showRemove","chainTop","_b","UserProfileContext","disableUserProfile","renderUserProfile","messageRef","useRef","avatarRef","contextMenuRef","_c","useState","contextStyle","setContextStyle","isByMe","isPending","isFailed","MemoizedMessageText","useMemo","splitMessage","split","matchedMessage","word","updatedAt","push","uuidv4","BODY_1","MESSAGE_EDITED","useEffect","current","clientHeight","top","innerWidth","__spreadArrays","Array","isArray","join","ContextMenu","toggleDropdown","profileUrl","closeDropdown","MenuItems","paddingTop","paddingBottom","close","UserProfile","SECONDARY_3","friendName","nickname","CAPTION_3","ONBACKGROUND_3","Loader","SPINNER","ERROR","MORE","CONTENT_INVERSE","MenuItem","CONTEXT_MENU_DROPDOWN__COPY","CONTEXT_MENU_DROPDOWN__EDIT","CONTEXT_MENU_DROPDOWN__RESEND","CONTEXT_MENU_DROPDOWN__DELETE","OpenChannelAdminMessage","URL_REG","createUrlTester","regexp","test","checkOGIsEnalbed","ogMetaData","url","OpenchannelOGMessage","defaultImage","messageComponentRef","isUrl","wordClassName","LinkLabel","openLink","open","SUBTITLE_2","description","ImageRenderer","alt","THUMBNAIL_NONE","SUPPORTING_TYPES","IMAGE","VIDEO","UNSUPPORTED","SUPPORTED_MIMES","getSupportingFileType","type","OpenchannelThumbnailMessage","onClick","localUrl","thumbnails","thumbnailUrl","isMessageSent","PLAY","PHOTO","ON_BACKGROUND_2","checkFileType","fileUrl","result","imageFile","audioFile","FILE_DOCUMENT","FILE_AUDIO","truncate","fullStr","strLen","undefined","separator","sepLen","charsToShow","frontChars","ceil","backChars","floor","substr","OpenchannelFileMessage","openFileUrl","TextButton","name","RemoveMessageModal","onCloseModal","onDeleteMessage","Modal","MODAL__DELETE_MESSAGE__TITLE","MessageTypes","ADMIN","USER","FILE","THUMBNAIL","OG","UNKNOWN","SendingMessageStatus","getMessageType","isUserMessage","isAdminMessage","isImage","isVideo","MessageHoc","editDisabled","hasSeperator","renderCustomMessage","deleteMessage","updateMessage","chainBottom","RenderedMessage","setShowEdit","_d","setShowRemove","_e","showFileViewer","setShowFileViewer","editMessageInputRef","requestState","messageId","DateSeparator","OpenChannelFileMessage","OpenChannelOGMessage","OpenChannelThumbnailMessage","OpenChannelUserMessage","FileViewer","OpenchannelConversationScroll","useMessageGrouping","openchannel","allMessages","isOnline","hasMore","onScroll","scrollRef","showScrollDownButton","setShowScrollDownButton","handleOnScroll","e","element","target","navigator","userAgent","nodes","querySelectorAll","first_1","scrollIntoView","scrollToBottom","scrollTo","hasMessage","index","previousMessage","previousMessageCreatedAt","currentCreatedAt","isSameDay","PlaceHolder","PlaceHolderTypes","NO_MESSAGES","CHEVRON_DOWN","SET_CURRENT_CHANNEL","SET_CHANNEL_INVALID","RESET_MESSAGES","GET_PREV_MESSAGES_START","GET_PREV_MESSAGES_SUCESS","GET_PREV_MESSAGES_FAIL","SENDING_MESSAGE_FAILED","SENDING_MESSAGE_SUCCEEDED","SENDING_MESSAGE_START","RESENDING_MESSAGE_START","FETCH_PARTICIPANT_LIST","FETCH_BANNED_USER_LIST","FETCH_MUTED_USER_LIST","ON_MESSAGE_RECEIVED","ON_MESSAGE_UPDATED","ON_MESSAGE_DELETED","ON_MESSAGE_DELETED_BY_REQ_ID","ON_OPERATOR_UPDATED","ON_USER_ENTERED","ON_USER_EXITED","ON_USER_MUTED","ON_USER_UNMUTED","ON_USER_BANNED","ON_USER_UNBANNED","ON_CHANNEL_FROZEN","ON_CHANNEL_UNFROZEN","ON_CHANNEL_CHANGED","ON_META_DATA_CREATED","ON_META_DATA_UPDATED","ON_META_DATA_DELETED","ON_META_COUNTERS_CREATED","ON_META_COUNTERS_UPDATED","ON_META_COUNTERS_DELETED","ON_MENTION_RECEIVED","reducer","state","action","actionTypes","gottenChannel","payload","isInvalid","currentOpenChannel","participants","bannedParticipantIds","mutedParticipantIds","loading","messages","lastMessageTimestamp","actionChannelUrl","receivedMessages_1","_hasMore","_lastMessageTimestamp","stateChannel","stateChannelUrl","filteredAllMessages","filter","find","compareIds","initialized","sentMessage_1","newMessages","m","reqId","sentMessage_2","eventedChannel","resentMessage_1","fetchedParticipantList","fetchedBannedUserList","every","fetchedMutedUserList","receivedMessage","updatedMessage_1","currentChannel","isIdentical","deletedMessageId_1","updatedOperators","enteredUser","exitedUser_1","participant","mutedUser","unmutedUser_1","bannedUser","unbannedUser_1","frozenChannel","frozen","unfrozenChannel","changedChannel","initialState","useSetChannel","channelUrl","sdkInit","fetchingParticipants","sdk","messagesDispatcher","OpenChannel","getChannel","messageActionTypes","enter","_","participantListQuery","createParticipantListQuery","bannedParticipantListQuery","createBannedUserListQuery","mutedParticipantListQuery","createMutedUserListQuery","utils","useHandleChannelEvents","checkScrollBottom","messageReceiverId","ChannelHandler","onMessageReceived","scrollToEnd","onMessageUpdated","onMessageDeleted","onOperatorUpdated","onUserEntered","onUserExited","onUserMuted","onUserUnmuted","onUserBanned","onUserUnbanned","onChannelFrozen","onChannelUnfrozen","onChannelChanged","onMetaDataCreated","metaData","onMetaDataUpdated","onMetaDataDeleted","metaDataKeys","onMetaCountersCreated","metaCounter","onMetaCountersUpdated","onMetaCountersDeleted","metaCounterKeys","onMentionReceived","addChannelHandler","removeChannelHandler","useInitialMessagesFetch","userFilledMessageListParams","MessageListParams","getMessagesByTimestamp","messageListParams_1","prevResultSize","isInclusive","includeReplies","includeReactions","Object","keys","forEach","key","messageListParams","Date","getTime","useScrollCallback","useCallback","callback","hasMore_1","lastMessageTimestamp_1","useCheckScrollBottom","conversationScrollRef","isBottom","conversationScroll","useSendMessageCallback","onBeforeSendUserMessage","messageInputRef","UserMessageParams","value","createParamsDefault","txt","trim","toString","params","createCustomParams","isBottom_1","pendingMessage","sendUserMessage","useFileUploadCallback","imageCompression","onBeforeSendFileMessage","file","FileMessageParams","compressionRate_1","resizingWidth_1","resizingHeight_1","createCustomParams_1","compressibleFileType","compressibleRatio","compressibleDiamensions_1","canCompressImage","createParamsDefault_1","file_","image_1","src","URL","createObjectURL","onload","revokeObjectURL","canvas","imageWidth","naturalWidth","imageHeight","naturalHeight","targetWidth","targetHeight","context","getContext","drawImage","toBlob","newImageBlob","compressedFile","File","sendFileMessage","useUpdateMessageCallback","updateUserMessage","useDeleteMessageCallback","useResendMessageCallback","failedMessage","resendUserMessage","resendFileMessage","console","COMPONENT_CLASS_NAME","OpenchannelConversation","stores","config","queries","renderChannelTitle","onChatHeaderActionClick","sdkStore","userStore","pubSub","useReducer","messagesReducer","messagesInitialState","messagesStore","userDefinedDisableUserProfile","userDefinedRenderProfile","amIBanned","amIMuted","handleSendMessage","handleFileUpload","subscriber","Map","subscribe","set","topics","msg","fromSelector","s","remove","NO_CHANNELS","LOADING","WRONG","UserProfileProvider","participantCount","OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS","coverUrl","FrozenChannelNotification","withSendbirdContext"],"mappings":"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"}